/**
* This file was auto-generated by SAP Web IDE build and includes all
* the source files required by SAPUI5 runtime for performance optimization.
* PLEASE DO NOT EDIT THIS FILE!! Changes will be overwritten the next time the build is run.
*/
jQuery.sap.registerPreloadedModules({
	"version": "2.0",
	"name": "com/nvidia/vebs/Component-preload",
	"modules": {
		"com/nvidia/vebs/controller/QueryBuilder.controller.js": "jQuery.sap.require(\"sap.ui.thirdparty.jqueryui.jquery-ui-core\");\r\njQuery.sap.require(\"sap.ui.thirdparty.jqueryui.jquery-ui-widget\");\r\njQuery.sap.require(\"sap.ui.thirdparty.jqueryui.jquery-ui-mouse\");\r\njQuery.sap.require(\"sap.ui.thirdparty.jqueryui.jquery-ui-sortable\");\r\njQuery.sap.require(\"sap.ui.thirdparty.jqueryui.jquery-ui-droppable\");\r\njQuery.sap.require(\"sap.ui.thirdparty.jqueryui.jquery-ui-draggable\");\r\n\r\nsap.ui.define([\r\n\t\"sap/ui/core/mvc/Controller\",\r\n\t\"sap/m/Dialog\",\r\n\t\"sap/ui/model/json/JSONModel\",\r\n\t\"sap/m/Button\",\r\n\t\"sap/m/Label\",\r\n\t\"sap/m/Input\",\r\n\t\"com/nvidia/vebs/util/formatter\"\r\n], function(Controller, Dialog, JSONModel, Button, Label, Input, Formatter) {\r\n\t\"use strict\";\r\n\r\n\treturn Controller.extend(\"com.nvidia.vebs.controller.QueryBuilder\", {\r\n\t\tonInit: function() {\r\n\r\n\t\t\tthis.getOwnerComponent().getRouter().getRoute(\"QueryBuilder\").attachPatternMatched(this._onObjectMatched, this);\r\n\r\n\t\t\tvar oModelJoins = new JSONModel();\r\n\t\t\toModelJoins.setData([]);\r\n\t\t\tthis.getView().setModel(oModelJoins, \"oModelJoins\");\r\n\r\n\t\t\tvar oModelSelFields = new JSONModel();\r\n\t\t\toModelSelFields.setData([]);\r\n\t\t\tthis.getView().setModel(oModelSelFields, \"oModelSelFields\");\r\n\r\n\t\t\tvar oModelTables = new JSONModel();\r\n\t\t\toModelTables.setData([]);\r\n\t\t\tthis.getView().setModel(oModelTables, \"oModelTables\");\r\n\r\n\t\t\t//Sorting Function\r\n\t\t\tthis.firstBy = (function() {\r\n\t\t\t\tfunction e(f) {\r\n\t\t\t\t\tf.thenBy = t;\r\n\t\t\t\t\treturn f;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction t(y, x) {\r\n\t\t\t\t\tx = this;\r\n\t\t\t\t\treturn e(function(a, b) {\r\n\t\t\t\t\t\treturn x(a, b) || y(a, b);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn e;\r\n\t\t\t})();\r\n\r\n\t\t},\r\n\r\n\t\t_onObjectMatched: function(oEvent) {\r\n\r\n\t\t},\r\n\r\n\t\tonSwitchToggle: function(oEvent) {\r\n\r\n\t\t\tvar bState = oEvent.getSource().getState();\r\n\r\n\t\t\tif (bState) {\r\n\t\t\t\tthis._showEditor(true);\r\n\t\t\t\t//Generate Code\r\n\t\t\t\tthis.generateCode();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._showEditor(false);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_showEditor: function(bFlag) {\r\n\r\n\t\t\tvar oLeftPanel = this.getView().byId(\"idLeftPanel\");\r\n\r\n\t\t\tif (bFlag) {\r\n\t\t\t\toLeftPanel.getLayoutData().setSize(\"75%\");\r\n\t\t\t} else {\r\n\t\t\t\toLeftPanel.getLayoutData().setSize(\"100%\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonAddTable: function(oEvent) {\r\n\r\n\t\t\tvar dialog = new Dialog({\r\n\t\t\t\ttitle: 'Add Table',\r\n\t\t\t\ttype: 'Message',\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\tnew sap.m.MultiInput('idTabname', {\r\n\t\t\t\t\t\tplaceholder: \"Table Name\",\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmaxLength: 30,\r\n\t\t\t\t\t\tvalueLiveUpdate: true,\r\n\t\t\t\t\t\tliveChange: function(oEvent) {\r\n\t\t\t\t\t\t\tvar sText = oEvent.getParameter('value');\r\n\t\t\t\t\t\t\tvar oParent = oEvent.getSource().getParent();\r\n\t\t\t\t\t\t\tif (sText.length > 0) {\r\n\t\t\t\t\t\t\t\toParent.getBeginButton().setEnabled(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (oEvent.getSource().getValue()) {\r\n\t\t\t\t\t\t\t\toEvent.getSource().setValue(oEvent.getSource().getValue().trim().toUpperCase());\r\n\t\t\t\t\t\t\t\toEvent.getSource().setValueState(\"None\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\tsubmit: function(oEvent) {\r\n\t\t\t\t\t\t\tvar sTabname = oEvent.getSource().getValue();\r\n\t\t\t\t\t\t\tvar sAlias = sap.ui.getCore().byId('idAlias').getValue();\r\n\t\t\t\t\t\t\tthis.getTableFields(sTabname, sAlias);\r\n\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew Input('idAlias', {\r\n\t\t\t\t\t\tplaceholder: \"Alias\",\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmaxLength: 10,\r\n\t\t\t\t\t\tliveChange: function(oEvent) {\r\n\t\t\t\t\t\t\tif (oEvent.getSource().getValue()) {\r\n\t\t\t\t\t\t\t\toEvent.getSource().setValue(oEvent.getSource().getValue().trim().toUpperCase());\r\n\t\t\t\t\t\t\t\toEvent.getSource().setValueState(\"None\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsubmit: function(oEvent) {\r\n\t\t\t\t\t\t\tvar sTabname = sap.ui.getCore().byId('idTabname').getValue();\r\n\t\t\t\t\t\t\tvar sAlias = sap.ui.getCore().byId('idAlias').getValue();\r\n\t\t\t\t\t\t\tthis.getTableFields(sTabname, sAlias);\r\n\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t})\r\n\t\t\t\t],\r\n\t\t\t\tbeginButton: new Button({\r\n\t\t\t\t\ttext: 'Submit',\r\n\t\t\t\t\tenabled: false,\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\tvar sTabname = sap.ui.getCore().byId('idTabname').getValue();\r\n\t\t\t\t\t\tvar sAlias = sap.ui.getCore().byId('idAlias').getValue();\r\n\t\t\t\t\t\tthis.getTableFields(sTabname, sAlias);\r\n\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t}),\r\n\t\t\t\tendButton: new Button({\r\n\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t}),\r\n\t\t\t\tafterClose: function() {\r\n\t\t\t\t\tdialog.destroy();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tdialog.open();\r\n\t\t},\r\n\r\n\t\tgetTableFields: function(sTabname, sAlias) {\r\n\r\n\t\t\tif (this._checkDuplicateTable(sTabname, sAlias)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar afilters = [];\r\n\t\t\tafilters.push(new sap.ui.model.Filter(\"Tabname\", sap.ui.model.FilterOperator.EQ, sTabname));\r\n\r\n\t\t\tthis.getView().getModel().read(\"/FieldNamesSet\", {\r\n\t\t\t\tfilters: afilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\tsap.ui.core.BusyIndicator.hide();\r\n\t\t\t\t\tthis.createTableBoxes(sTabname, sAlias, oData.results);\r\n\t\t\t\t}.bind(this),\r\n\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\tsap.ui.core.BusyIndicator.hide();\r\n\t\t\t\t\tvar sMsg = \"Table \" + sTabname + \" does not exists\";\r\n\t\t\t\t\tsap.m.MessageToast.show(sMsg);\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\t_proposeJoins: function(sLTable, sRTable) {\r\n\r\n\t\t\tvar oView = this.getView();\r\n\r\n\t\t\tvar aJoins = oView.getModel(\"oModelJoins\").getData();\r\n\r\n\t\t\tvar aJoinsOut = [];\r\n\r\n\t\t\tfor (var i = 0; i < aJoins.length; i++) {\r\n\t\t\t\tvar oObj = {\r\n\t\t\t\t\t\"TABNAMEL\": aJoins[i].LTabname,\r\n\t\t\t\t\t\"COLNAMEL\": aJoins[i].LFieldname,\r\n\t\t\t\t\t\"TABNAMER\": aJoins[i].RTabname,\r\n\t\t\t\t\t\"COLNAMER\": aJoins[i].RFieldname,\r\n\t\t\t\t\t\"TYPE\": aJoins[i].JoinType,\r\n\t\t\t\t\t\"OP\": parseInt(0, 10)\r\n\t\t\t\t};\r\n\t\t\t\taJoinsOut.push(oObj);\r\n\t\t\t}\r\n\r\n\t\t\tvar sJoinsString = JSON.stringify(aJoinsOut);\r\n\r\n\t\t\tvar aItems = oView.byId(\"idListTabBoxes\").getItems();\r\n\r\n\t\t\tvar aTablesOut = [];\r\n\r\n\t\t\tfor (i = 0; i < aItems.length; i++) {\r\n\t\t\t\tif (aItems[i].getContent()[0] instanceof sap.m.Panel) {\r\n\t\t\t\t\tvar sTabname = aItems[i].getContent()[0].getCustomData()[1].getValue();\r\n\r\n\t\t\t\t\tvar oTab = {\r\n\t\t\t\t\t\t\"TABNAME\": sTabname,\r\n\t\t\t\t\t\t\"RANK\": parseInt(i, 10)\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\taTablesOut.push(oTab);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar sTableString = JSON.stringify(aTablesOut);\r\n\r\n\t\t\tvar sQuery = \"SELECT_1\";\r\n\r\n\t\t\tvar afilters = [];\r\n\t\t\tafilters.push(new sap.ui.model.Filter(\"QueryId\", sap.ui.model.FilterOperator.EQ, sQuery));\r\n\t\t\tafilters.push(new sap.ui.model.Filter(\"LTable\", sap.ui.model.FilterOperator.EQ, sLTable));\r\n\t\t\tafilters.push(new sap.ui.model.Filter(\"RTable\", sap.ui.model.FilterOperator.EQ, sRTable));\r\n\t\t\tif (sJoinsString !== \"\") {\r\n\t\t\t\tafilters.push(new sap.ui.model.Filter(\"JoinsData\", sap.ui.model.FilterOperator.EQ, sJoinsString));\r\n\t\t\t}\r\n\t\t\tafilters.push(new sap.ui.model.Filter(\"TablesData\", sap.ui.model.FilterOperator.EQ, sTableString));\r\n\r\n\t\t\toView.getModel().read(\"/proposeJoinSet\", {\r\n\t\t\t\tfilters: afilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\tfor (i = 0; i < oData.results.length; i++) {\r\n\t\t\t\t\t\tvar oJoinData = {\r\n\t\t\t\t\t\t\t\"JoinKey\": oData.results[i].JoinKey,\r\n\t\t\t\t\t\t\t\"LTabRank\": oData.results[i].LTabRank,\r\n\t\t\t\t\t\t\t\"LTabname\": oData.results[i].LTabname,\r\n\t\t\t\t\t\t\t\"LFieldname\": oData.results[i].LFieldname,\r\n\t\t\t\t\t\t\t\"LFieldPos\": oData.results[i].LFieldPos,\r\n\t\t\t\t\t\t\t\"LFieldKeyflag\": oData.results[i].LFieldKeyflag,\r\n\t\t\t\t\t\t\t\"RTabRank\": oData.results[i].RTabRank,\r\n\t\t\t\t\t\t\t\"RTabname\": oData.results[i].RTabname,\r\n\t\t\t\t\t\t\t\"RFieldname\": oData.results[i].RFieldname,\r\n\t\t\t\t\t\t\t\"RFieldPos\": oData.results[i].RFieldPos,\r\n\t\t\t\t\t\t\t\"RFieldKeyflag\": oData.results[i].RFieldKeyflag,\r\n\t\t\t\t\t\t\t\"JoinType\": oData.results[i].JoinType\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t//Adding newly proposed Join Conditions to existing data\r\n\t\t\t\t\t\taJoins.push(oJoinData); //Automatically Model will get this data\r\n\r\n\t\t\t\t\t\toView.getModel(\"oModelJoins\").refresh();\r\n\r\n\t\t\t\t\t\t//Show Join Links\r\n\t\t\t\t\t\tthis._showJoinLinks(aJoins);\r\n\r\n\t\t\t\t\t\tthis.generateCode();\r\n\t\t\t\t\t}\r\n\t\t\t\t}.bind(this),\r\n\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\tsap.m.MessageToast.show(\"Data fetching failed\");\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_showJoinLinks: function(aJoins) {\r\n\r\n\t\t\tvar oView = this.getView();\r\n\r\n\t\t\tfor (var i = 0; i < aJoins.length; i++) {\r\n\t\t\t\tvar aSplit = aJoins[i].JoinKey.split(\"-\");\r\n\r\n\t\t\t\tvar oLTableModel = oView.getModel(\"oModel\" + aSplit[0]);\r\n\t\t\t\tvar aLTabData = oLTableModel.getData();\r\n\t\t\t\tvar iLIndex = this._searchArray(\"Tabname\", \"Fieldname\", aSplit[0], aSplit[1], aLTabData);\r\n\t\t\t\taLTabData[iLIndex].JoinExists = true;\r\n\t\t\t\toLTableModel.refresh(true);\r\n\r\n\t\t\t\tvar oRTableModel = oView.getModel(\"oModel\" + aSplit[2]);\r\n\t\t\t\tvar aRTabData = oRTableModel.getData();\r\n\t\t\t\tvar iRIndex = this._searchArray(\"Tabname\", \"Fieldname\", aSplit[2], aSplit[3], aRTabData);\r\n\t\t\t\taRTabData[iRIndex].JoinExists = true;\r\n\t\t\t\toRTableModel.refresh(true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_checkDuplicateTable: function(sTabname, sAlias) {\r\n\r\n\t\t\tvar oView = this.getView();\r\n\r\n\t\t\t//Check Duplicate Table name\r\n\t\t\tif (sTabname !== \"\") {\r\n\t\t\t\tvar oObject = oView.byId(sTabname);\r\n\t\t\t\tif (oObject) {\r\n\t\t\t\t\tthis._showMessage(sTabname + \" has already been added\");\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (sAlias === \"\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar aTabBoxes = oView.byId(\"idListTabBoxes\").getItems();\r\n\r\n\t\t\t//Looping all the added tables\r\n\t\t\tfor (var i = 0; i < aTabBoxes.length; i++) {\r\n\t\t\t\tvar oContent = aTabBoxes[i].getContent()[0]; //Panel Inside CustomListItem\r\n\r\n\t\t\t\tif (oContent instanceof sap.m.Panel) {\r\n\t\t\t\t\tvar sExistingTabname = oContent.getCustomData()[1].getValue();\r\n\t\t\t\t\tvar sExitingAlias = oContent.getCustomData()[2].getValue();\r\n\r\n\t\t\t\t\tif (sAlias.toUpperCase() === sExitingAlias.toUpperCase()) {\r\n\t\t\t\t\t\tthis._showMessage(\"Alias: '\" + sAlias + \"' has already been used for table: \" + sExistingTabname);\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Default Return is false\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\t_onEditAlias: function(oEvent) {\r\n\r\n\t\t\tvar oTablePanel = oEvent.getSource().getParent().getParent();\r\n\t\t\tvar sTabname = oTablePanel.getCustomData()[1].getValue();\r\n\t\t\tvar sExistingAlias = oTablePanel.getCustomData()[2].getValue();\r\n\r\n\t\t\tvar dialog = new Dialog({\r\n\t\t\t\ttitle: 'Edit Alias',\r\n\t\t\t\ttype: 'Message',\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\tnew sap.m.Input({\r\n\t\t\t\t\t\tvalue: sTabname,\r\n\t\t\t\t\t\tmaxLength: 30,\r\n\t\t\t\t\t\teditable: false\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew Input('idAlias', {\r\n\t\t\t\t\t\tvalue: sExistingAlias,\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmaxLength: 10,\r\n\t\t\t\t\t\tliveChange: function(oEvent) {\r\n\t\t\t\t\t\t\tif (oEvent.getSource().getValue()) {\r\n\t\t\t\t\t\t\t\toEvent.getSource().setValue(oEvent.getSource().getValue().trim().toUpperCase());\r\n\t\t\t\t\t\t\t\toEvent.getSource().setValueState(\"None\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this),\r\n\t\t\t\t\t\tsubmit: function(oEvent) {\r\n\t\t\t\t\t\t\tvar sNewAlias = oEvent.getSource().getValue();\r\n\r\n\t\t\t\t\t\t\tif (sExistingAlias.toUpperCase() === sNewAlias.toUpperCase()) {\r\n\t\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar bDuplicate = this._checkDuplicateTable(\"\", sNewAlias);\r\n\t\t\t\t\t\t\t\tif (!bDuplicate) {\r\n\t\t\t\t\t\t\t\t\tthis._updateHeading(oTablePanel, sTabname, sNewAlias);\r\n\t\t\t\t\t\t\t\t\t//Generate Code\r\n\t\t\t\t\t\t\t\t\tthis.generateCode();\r\n\t\t\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t})\r\n\t\t\t\t],\r\n\t\t\t\tbeginButton: new Button({\r\n\t\t\t\t\ttext: 'Submit',\r\n\t\t\t\t\tenabled: true,\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\tvar sNewAlias = sap.ui.getCore().byId('idAlias').getValue();\r\n\r\n\t\t\t\t\t\tif (sExistingAlias.toUpperCase() === sNewAlias.toUpperCase()) {\r\n\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar bDuplicate = this._checkDuplicateTable(\"\", sNewAlias);\r\n\t\t\t\t\t\t\tif (!bDuplicate) {\r\n\t\t\t\t\t\t\t\tthis._updateHeading(oTablePanel, sTabname, sNewAlias);\r\n\t\t\t\t\t\t\t\t//Generate Code\r\n\t\t\t\t\t\t\t\tthis.generateCode();\r\n\t\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t}),\r\n\t\t\t\tendButton: new Button({\r\n\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t}),\r\n\t\t\t\tafterClose: function() {\r\n\t\t\t\t\tdialog.destroy();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tdialog.open();\r\n\r\n\t\t},\r\n\r\n\t\t_updateHeading: function(oTablePanel, sTabname, sNewAlias) {\r\n\r\n\t\t\tif (sNewAlias !== \"\") {\r\n\t\t\t\tvar sTitle = sTabname + \" ~ \" + sNewAlias;\r\n\t\t\t} else {\r\n\t\t\t\tsTitle = sTabname;\r\n\t\t\t}\r\n\r\n\t\t\toTablePanel.getCustomData()[2].setValue(sNewAlias);\r\n\r\n\t\t\toTablePanel.getHeaderToolbar().getContent()[0].setText(sTitle);\r\n\r\n\t\t},\r\n\r\n\t\tcreateTableBoxes: function(sTabname, sAlias, oData) {\r\n\r\n\t\t\tvar oView = this.getView();\r\n\r\n\t\t\tvar bState = oView.byId(\"idLiveCodeBtn\").getState();\r\n\r\n\t\t\tif (bState) {\r\n\t\t\t\tthis._showEditor(true);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis._showEditor(false);\r\n\t\t\t}\r\n\r\n\t\t\t//Creating JSON Model for each Table   \r\n\t\t\tvar oModel = new JSONModel();\r\n\t\t\toModel.setData(oData);\r\n\r\n\t\t\tvar sModelName = \"oModel\" + sTabname;\r\n\r\n\t\t\toView.setModel(oModel, sModelName);\r\n\r\n\t\t\tif (sAlias !== \"\") {\r\n\t\t\t\tvar sTitle = sTabname + \" ~ \" + sAlias;\r\n\t\t\t} else {\r\n\t\t\t\tsTitle = sTabname;\r\n\t\t\t}\r\n\r\n\t\t\tvar oCustomData = new sap.ui.core.CustomData({\r\n\t\t\t\tkey: \"Tabname\",\r\n\t\t\t\tvalue: sTabname\r\n\t\t\t});\r\n\r\n\t\t\tvar oCustomData1 = new sap.ui.core.CustomData({\r\n\t\t\t\tkey: \"Alias\",\r\n\t\t\t\tvalue: sAlias\r\n\t\t\t});\r\n\r\n\t\t\t//Create a Panel\r\n\t\t\tvar oPanel = new sap.m.Panel(oView.createId(sTabname), {\r\n\t\t\t\tbackgroundDesign: \"Transparent\",\r\n\t\t\t\texpandable: false,\r\n\t\t\t\texpanded: true,\r\n\t\t\t\twidth: \"310px\",\r\n\t\t\t\theight: \"350px\",\r\n\t\t\t\tcustomData: [oCustomData, oCustomData1],\r\n\t\t\t\texpand: [this._onPanelExpand, this],\r\n\t\t\t\theaderToolbar: new sap.m.Toolbar({\r\n\t\t\t\t\tdesign: \"Transparent\",\r\n\t\t\t\t\tstyle: \"Clear\",\r\n\t\t\t\t\tcontent: [new sap.m.Title({\r\n\t\t\t\t\t\t\ttext: sTitle,\r\n\t\t\t\t\t\t\tlevel: \"H6\"\r\n\t\t\t\t\t\t}).addStyleClass(\"sapUiSmallMarginBegin\"),\r\n\t\t\t\t\t\tnew sap.m.ToolbarSpacer(),\r\n\t\t\t\t\t\tnew Button({\r\n\t\t\t\t\t\t\ticon: \"sap-icon://edit\",\r\n\t\t\t\t\t\t\ttype: \"Ghost\",\r\n\t\t\t\t\t\t\tpress: [this._onEditAlias, this]\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tnew Button({\r\n\t\t\t\t\t\t\ticon: \"sap-icon://sys-cancel\",\r\n\t\t\t\t\t\t\ttype: \"Ghost\",\r\n\t\t\t\t\t\t\tpress: [this._onDelTable, this]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t]\r\n\t\t\t\t})\r\n\t\t\t}).addStyleClass(\"zep_TableBox sapUiSizeCompact\");\r\n\r\n\t\t\toCustomData = [new sap.ui.core.CustomData({\r\n\t\t\t\t\tkey: \"Tabname\",\r\n\t\t\t\t\tvalue: \"{\" + sModelName + \">\" + \"Tabname\" + \"}\"\r\n\t\t\t\t}),\r\n\t\t\t\tnew sap.ui.core.CustomData({\r\n\t\t\t\t\tkey: \"Fieldname\",\r\n\t\t\t\t\tvalue: \"{\" + sModelName + \">\" + \"Fieldname\" + \"}\"\r\n\t\t\t\t})\r\n\t\t\t];\r\n\r\n\t\t\tvar oFieldname = new sap.m.Text({\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tparts: [{\r\n\t\t\t\t\t\tpath: sModelName + \">\" + \"Fieldname\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tpath: sModelName + \">\" + \"Keyflag\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tformatter: function(sValue, bKeyflag) {\r\n\t\t\t\t\t\tif (bKeyflag) {\r\n\t\t\t\t\t\t\tthis.addStyleClass(\"zep_TableKey\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn sValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\twidth: \"110px\",\r\n\t\t\t\twrapping: true\r\n\t\t\t});\r\n\r\n\t\t\tvar oDesc = new sap.m.Text({\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tparts: [{\r\n\t\t\t\t\t\tpath: sModelName + \">\" + \"Description\"\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tpath: sModelName + \">\" + \"Keyflag\"\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tformatter: function(sValue, bKeyflag) {\r\n\t\t\t\t\t\tif (bKeyflag) {\r\n\t\t\t\t\t\t\tthis.addStyleClass(\"zep_TableKey\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn sValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\twidth: \"110px\",\r\n\t\t\t\twrapping: true\r\n\t\t\t}).addStyleClass(\"sapUiSmallMarginBegin\");\r\n\r\n\t\t\tvar oJoinIcon = new sap.ui.core.Icon({\r\n\t\t\t\tsrc: \"sap-icon://chain-link\",\r\n\t\t\t\tsize: \"17px\",\r\n\t\t\t\tpress: [this._onJoinClick, this],\r\n\t\t\t\tvisible: \"{\" + sModelName + \">\" + \"JoinExists\" + \"}\",\r\n\t\t\t\t//\thoverColor: \"rgb(163,216,164)\"\r\n\t\t\t\tcolor: \"#2ea70f\"\r\n\t\t\t}).addStyleClass(\"sapUiTinyMarginBegin\");\r\n\r\n\t\t\t//Creating Popover ListItems and Bindings\r\n\t\t\tvar oPopoverItem = this._createItem();\r\n\r\n\t\t\tvar aSorter = [];\r\n\r\n\t\t\taSorter.push(new sap.ui.model.Sorter({\r\n\t\t\t\tpath: \"LTabRank\",\r\n\t\t\t\tdescending: false\r\n\t\t\t}));\r\n\r\n\t\t\taSorter.push(new sap.ui.model.Sorter({\r\n\t\t\t\tpath: \"RTabRank\",\r\n\t\t\t\tdescending: false\r\n\t\t\t}));\r\n\r\n\t\t\tvar oListItem = new sap.m.CustomListItem({\r\n\t\t\t\tcustomData: oCustomData,\r\n\t\t\t\t//type: \"Active\",\r\n\t\t\t\tcontent: [new sap.m.HBox({\r\n\t\t\t\t\titems: [oFieldname, oDesc, oJoinIcon]\r\n\t\t\t\t})],\r\n\t\t\t\tdependents: [new sap.m.Popover({\r\n\t\t\t\t\tshowHeader: true,\r\n\t\t\t\t\ttitle: \"Join Condition(s)\",\r\n\t\t\t\t\tcontent: new sap.m.List({\r\n\t\t\t\t\t\titems: {\r\n\t\t\t\t\t\t\tpath: \"oModelJoins>/\",\r\n\t\t\t\t\t\t\ttemplate: oPopoverItem,\r\n\t\t\t\t\t\t\tsorter: aSorter,\r\n\t\t\t\t\t\t\ttemplateShareable: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).addStyleClass(\"zep_joinConditions\"),\r\n\t\t\t\t\tplacement: \"Auto\"\r\n\t\t\t\t}).addStyleClass(\"sapUiContentPadding\")]\r\n\t\t\t});\r\n\r\n\t\t\tvar oList = new sap.m.List(oView.createId(sTabname + \"List\"), {\r\n\t\t\t\tincludeItemInSelection: true,\r\n\t\t\t\tselectionChange: [this._onFieldSelect, this],\r\n\t\t\t\tmode: \"MultiSelect\",\r\n\t\t\t\tsticky: [\"HeaderToolbar\"],\r\n\t\t\t\theaderToolbar: new sap.m.Toolbar({\r\n\t\t\t\t\tdesign: \"Transparent\",\r\n\t\t\t\t\tstyle: \"Clear\",\r\n\t\t\t\t\tcontent: [new sap.m.SearchField({\r\n\t\t\t\t\t\t\tliveChange: [this._onFieldSearch, this],\r\n\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\tshowSearchButton: false,\r\n\t\t\t\t\t\t\tplaceholder: \"Field Name, Description\"\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tnew sap.m.ToggleButton({\r\n\t\t\t\t\t\t\ticon: \"sap-icon://chain-link\",\r\n\t\t\t\t\t\t\tpress: [this._showLinks, this],\r\n\t\t\t\t\t\t\tpressed: false\r\n\t\t\t\t\t\t}),\r\n\t\t\t\t\t\tnew Button({\r\n\t\t\t\t\t\t\ticon: \"sap-icon://multiselect-none\",\r\n\t\t\t\t\t\t\tpress: [this._DeselectAll, this]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t]\r\n\t\t\t\t}),\r\n\t\t\t\titems: {\r\n\t\t\t\t\tpath: sModelName + \">/\",\r\n\t\t\t\t\ttemplate: oListItem\r\n\t\t\t\t},\r\n\t\t\t\tdragDropConfig: [new sap.ui.core.dnd.DragInfo({\r\n\t\t\t\t\t\tgroupName: \"Fields\",\r\n\t\t\t\t\t\tsourceAggregation: \"items\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tnew sap.ui.core.dnd.DropInfo({\r\n\t\t\t\t\t\tgroupName: \"Fields\",\r\n\t\t\t\t\t\tdropEffect: \"Link\",\r\n\t\t\t\t\t\tdropLayout: \"Horizontal\",\r\n\t\t\t\t\t\tdropPosition: \"On\",\r\n\t\t\t\t\t\ttargetAggregation: \"items\",\r\n\t\t\t\t\t\tdrop: [this.onDropField, this]\r\n\t\t\t\t\t})\r\n\t\t\t\t]\r\n\t\t\t}).addStyleClass(\"zep_TableList\");\r\n\r\n\t\t\toPanel.addContent(oList);\r\n\r\n\t\t\tvar oTabBoxItem = new sap.m.CustomListItem({\r\n\t\t\t\tcontent: oPanel\r\n\t\t\t}).addStyleClass(\"zep_TableMainBox\");\r\n\r\n\t\t\tvar oListTabBoxes = oView.byId(\"idListTabBoxes\");\r\n\r\n\t\t\t//Add Join Link Icon between the Panels first\r\n\t\t\tif (oListTabBoxes.getItems().length > 0) {\r\n\t\t\t\tthis._createJoiningLink(oListTabBoxes);\r\n\t\t\t}\r\n\r\n\t\t\toListTabBoxes.addItem(oTabBoxItem);\r\n\r\n\t\t\t//Create Join Links Automatically\r\n\t\t\tvar aItems = oListTabBoxes.getItems();\r\n\r\n\t\t\tif (aItems.length > 1) {\r\n\t\t\t\t//Get Left Table name\r\n\t\t\t\tvar iLeft = oListTabBoxes.indexOfItem(oTabBoxItem);\r\n\t\t\t\tvar sLTable = aItems[iLeft - 2].getContent()[0].getCustomData()[1].getValue();\r\n\t\t\t\t//Newly added table becomes the Right Table\r\n\t\t\t\tthis._proposeJoins(sLTable, sTabname);\r\n\t\t\t}\r\n\r\n\t\t\t//Add Table in Data Model\r\n\t\t\tvar oModelTable = this.getView().getModel(\"oModelTables\");\r\n\t\t\tvar oTable = {\r\n\t\t\t\t\"Tabname\": sTabname,\r\n\t\t\t\t\"Rank\": parseInt(oListTabBoxes.indexOfItem(oTabBoxItem), 10)\r\n\t\t\t};\r\n\t\t\tvar aTables = oModelTable.getData();\r\n\t\t\taTables.push(oTable);\r\n\t\t\toModelTable.setData(aTables);\r\n\t\t\toModelTable.refresh();\r\n\r\n\t\t\t//Generate Code\r\n\t\t\tthis.generateCode();\r\n\r\n\t\t},\r\n\r\n\t\t_onFieldSelect: function(oEvent) {\r\n\r\n\t\t\tvar oModelSelFields = this.getView().getModel(\"oModelSelFields\");\r\n\r\n\t\t\tvar aData = oModelSelFields.getData();\r\n\r\n\t\t\tvar oListItem = oEvent.getParameters().listItem;\r\n\r\n\t\t\tvar bSelected = oEvent.getParameters().selected;\r\n\r\n\t\t\tvar sTabname = oListItem.getCustomData()[0].getValue();\r\n\t\t\tvar sFieldname = oListItem.getCustomData()[1].getValue();\r\n\r\n\t\t\tif (bSelected) {\r\n\t\t\t\tvar oObj = {\r\n\t\t\t\t\t\"Counter\": parseInt(aData.length + 1, 10),\r\n\t\t\t\t\t\"Tabname\": sTabname,\r\n\t\t\t\t\t\"Fieldname\": sFieldname,\r\n\t\t\t\t\t\"FieldAlias\": \"\"\r\n\t\t\t\t};\r\n\r\n\t\t\t\taData.push(oObj);\r\n\t\t\t\toModelSelFields.refresh();\r\n\r\n\t\t\t} else { //Deleting the Field/Unselect\r\n\t\t\t\tvar iIndex = this._searchArray(\"Tabname\", \"Fieldname\", sTabname, sFieldname, aData);\r\n\r\n\t\t\t\taData.splice(iIndex, 1);\r\n\r\n\t\t\t\t//Reorder the counter\r\n\t\t\t\tfor (var i = 0; i < aData.length; i++) {\r\n\t\t\t\t\taData[i].Counter = i + 1;\r\n\t\t\t\t}\r\n\t\t\t\toModelSelFields.refresh();\r\n\t\t\t}\r\n\r\n\t\t\t//Refresh the Code\r\n\t\t\tthis.generateCode();\r\n\r\n\t\t},\r\n\r\n\t\tonReorderFields: function(oEvent) {\r\n\r\n\t\t\tvar oParams = oEvent.getParameters();\r\n\r\n\t\t\t//\tvar oListFields = this.getView().byId(\"idListFields\");\r\n\r\n\t\t\tvar oModelSelFields = this.getView().getModel(\"oModelSelFields\");\r\n\r\n\t\t\tvar aData = oModelSelFields.getData();\r\n\r\n\t\t\t//This index is also same as Context Path Index\r\n\t\t\t// var iIndexDrag = oListFields.indexOfItem(oParams.draggedControl);\r\n\t\t\t// var iIndexDrop = oListFields.indexOfItem(oParams.droppedControl);\r\n\r\n\t\t\tvar iIndexDrag = oParams.draggedControl.getBindingContext(\"oModelSelFields\").getPath().substr(1);\r\n\t\t\tvar iIndexDrop = oParams.droppedControl.getBindingContext(\"oModelSelFields\").getPath().substr(1);\r\n\r\n\t\t\tif (iIndexDrop === iIndexDrag) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar sDropPosition = oEvent.getParameters().dropPosition;\r\n\r\n\t\t\tvar iMoveto = 0;\r\n\r\n\t\t\tif (sDropPosition === \"After\") {\r\n\t\t\t\tiMoveto = iIndexDrop + 1;\r\n\t\t\t} else {\r\n\t\t\t\tiMoveto = iIndexDrop;\r\n\t\t\t}\r\n\r\n\t\t\tArray.prototype.move = function(from, to) {\r\n\t\t\t\tthis.splice(to, 0, this.splice(from, 1)[0]);\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\r\n\t\t\taData.move(iIndexDrag, iMoveto);\r\n\r\n\t\t\t//Re-sequence the counters\r\n\t\t\tfor (var i = 0; i < aData.length; i++) {\r\n\t\t\t\taData[i].Counter = i + 1;\r\n\t\t\t}\r\n\r\n\t\t\toModelSelFields.refresh();\r\n\r\n\t\t\t//Refresh the Code\r\n\t\t\tthis.generateCode();\r\n\r\n\t\t},\r\n\r\n\t\tonFieldAlias: function(oEvent) {\r\n\t\t\tif (oEvent.getSource().getValue()) {\r\n\t\t\t\toEvent.getSource().setValue(oEvent.getSource().getValue().trim().toLowerCase());\r\n\t\t\t\toEvent.getSource().setValueState(\"None\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_createJoiningLink: function(oListTabBoxes) {\r\n\r\n\t\t\tvar oLinkItem = new sap.m.CustomListItem({\r\n\t\t\t\tcontent: [new sap.m.VBox({\r\n\t\t\t\t\t\titems: [new sap.m.Switch({\r\n\t\t\t\t\t\t\tcustomTextOn: \"Inner\",\r\n\t\t\t\t\t\t\tcustomTextOff: \"Outer\",\r\n\t\t\t\t\t\t\tstate: true,\r\n\t\t\t\t\t\t\tchange: [this._toggleJoinType, this]\r\n\t\t\t\t\t\t}).addStyleClass(\"sapUiSizeCompact\")]\r\n\r\n\t\t\t\t\t\t//  [new sap.ui.core.Icon({\r\n\t\t\t\t\t\t// \tsrc: \"sap-icon://share-2\",\r\n\t\t\t\t\t\t// \tsize: \"28px\",\r\n\t\t\t\t\t\t// \tcolor: \"rgb(52,97,135)\",\r\n\t\t\t\t\t\t// \tpress: [this._onTableJoinClick, this]\r\n\t\t\t\t\t\t// })]\r\n\t\t\t\t\t}).addStyleClass(\"zep_Switch\")]\r\n\t\t\t\t\t// dependents: [new sap.m.Popover({\r\n\t\t\t\t\t// \tshowHeader: true,\r\n\t\t\t\t\t// \ttitle: \"Join Condition\",\r\n\t\t\t\t\t// \tcontent: [new sap.m.SegmentedButton({\r\n\t\t\t\t\t// \t\tselectedKey: \"inner\",\r\n\t\t\t\t\t// \t\titems: [new sap.m.SegmentedButtonItem({\r\n\t\t\t\t\t// \t\t\t\tkey: \"inner\",\r\n\t\t\t\t\t// \t\t\t\ttext: \"Inner\"\r\n\t\t\t\t\t// \t\t\t}),\r\n\t\t\t\t\t// \t\t\tnew sap.m.SegmentedButtonItem({\r\n\t\t\t\t\t// \t\t\t\tkey: \"outer\",\r\n\t\t\t\t\t// \t\t\t\ttext: \"Outer\"\r\n\t\t\t\t\t// \t\t\t})\r\n\t\t\t\t\t// \t\t]\r\n\t\t\t\t\t// \t})],\r\n\t\t\t\t\t// \tplacement: \"Bottom\"\r\n\t\t\t\t\t// }).addStyleClass(\"sapUiContentPadding\")]\r\n\t\t\t}).addStyleClass(\"zep_TableMainBox zep_TableJoinLink\");\r\n\r\n\t\t\toListTabBoxes.addItem(oLinkItem);\r\n\r\n\t\t},\r\n\r\n\t\t_toggleJoinType: function(oEvent) {\r\n\r\n\t\t\t//Check iilegal Join\r\n\t\t\tif (this._checkIllegalJoin(null, null, oEvent.getSource())) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//Update the Join Type in Model\r\n\t\t\tthis._updateJoinType(oEvent.getSource());\r\n\r\n\t\t\t//Generate Code\r\n\t\t\tthis.generateCode();\r\n\r\n\t\t},\r\n\r\n\t\t_onTableJoinClick: function(oEvent) {\r\n\r\n\t\t\tvar oListItem = oEvent.getSource().getParent().getParent();\r\n\t\t\tvar oPopover = oListItem.getDependents()[0];\r\n\t\t\toPopover.openBy(oEvent.getSource());\r\n\r\n\t\t},\r\n\r\n\t\tonDropTabBox: function(oEvent) {\r\n\r\n\t\t\tvar oParams = oEvent.getParameters();\r\n\r\n\t\t\tif (oParams.draggedControl.getContent()[0] instanceof sap.m.VBox) {\r\n\t\t\t\tthis._showMessage(\"Only Tables can be Swapped\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (oParams.droppedControl.getContent()[0] instanceof sap.m.VBox) {\r\n\t\t\t\tthis._showMessage(\"Only Tables can be Swapped\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (oParams.droppedControl.getId() === oParams.draggedControl.getId()) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//No. of tables\r\n\t\t\tvar oMainList = this.getView().byId(\"idListTabBoxes\");\r\n\r\n\t\t\tvar iTables = oMainList.getItems().length;\r\n\r\n\t\t\tvar iJoins = this.getView().getModel(\"oModelJoins\").getData().length;\r\n\r\n\t\t\t//Refresh the Joining Links\r\n\t\t\tif (iJoins > 0 && iTables > 3) {\r\n\t\t\t\tvar dialog = new Dialog({\r\n\t\t\t\t\ttitle: \"Confirm\",\r\n\t\t\t\t\ttype: \"Message\",\r\n\t\t\t\t\tcontent: new sap.m.Text({\r\n\t\t\t\t\t\ttext: \"Joining Links will be refreshed. Do you want to continue ?\"\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tbeginButton: new Button({\r\n\t\t\t\t\t\ttext: \"Yes\",\r\n\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t\tthis._swapTables(oParams);\r\n\t\t\t\t\t\t\tthis._refreshAllJoins();\r\n\t\t\t\t\t\t\t//Refresh the code\r\n\t\t\t\t\t\t\tthis.generateCode();\r\n\t\t\t\t\t\t}.bind(this)\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tendButton: new Button({\r\n\t\t\t\t\t\ttext: \"No\",\r\n\t\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}),\r\n\t\t\t\t\tafterClose: function() {\r\n\t\t\t\t\t\tdialog.destroy();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdialog.open();\r\n\t\t\t} else {\r\n\t\t\t\tthis._swapTables(oParams); //Allow normal swap if only 2 tables are there\r\n\t\t\t\t//Refresh the code\r\n\t\t\t\tthis.generateCode();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_swapTables: function(oParams) {\r\n\r\n\t\t\tvar oMainList = this.getView().byId(\"idListTabBoxes\");\r\n\r\n\t\t\tvar iIndexDragged = oMainList.indexOfItem(oParams.draggedControl);\r\n\t\t\tvar iIndexDropped = oMainList.indexOfItem(oParams.droppedControl);\r\n\r\n\t\t\tvar aItems = oMainList.getItems();\r\n\t\t\tvar aIndexes = [];\r\n\t\t\tfor (var i = 0; i < aItems.length; i++) {\r\n\t\t\t\taIndexes.push(oMainList.indexOfItem(aItems[i]));\r\n\t\t\t}\r\n\t\t\tvar temp = aIndexes[iIndexDragged];\r\n\t\t\taIndexes[iIndexDragged] = iIndexDropped;\r\n\t\t\taIndexes[iIndexDropped] = temp;\r\n\r\n\t\t\toMainList.removeAllItems();\r\n\r\n\t\t\t//Add back the items in desired sequence\r\n\t\t\tfor (i = 0; i < aIndexes.length; i++) {\r\n\t\t\t\toMainList.addItem(aItems[aIndexes[i]]);\r\n\t\t\t}\r\n\r\n\t\t\t//Swap Message\r\n\t\t\tvar sTable1 = oParams.draggedControl.getContent()[0].getCustomData()[1].getValue();\r\n\t\t\tvar sTable2 = oParams.droppedControl.getContent()[0].getCustomData()[1].getValue();\r\n\r\n\t\t\tvar sMsg = \"Tables: \" + sTable1 + \" and \" + sTable2 + \" were swapped\";\r\n\t\t\tthis._showMessage(sMsg, false);\r\n\r\n\t\t\t//Readjust Joins data on Tables DragnDrop\r\n\t\t\tvar oModelJoins = this.getView().getModel(\"oModelJoins\");\r\n\t\t\tvar aJoins = oModelJoins.getData();\r\n\r\n\t\t\t//Get Sequence of Tables\r\n\t\t\tvar oTableMap = new Map();\r\n\t\t\taItems = oMainList.getItems();\r\n\t\t\tfor (i = 0; i < aItems.length; i++) {\r\n\t\t\t\tif (aItems[i].getContent()[0] instanceof sap.m.Panel) {\r\n\t\t\t\t\tvar sTabname = aItems[i].getContent()[0].getCustomData()[1].getValue();\r\n\t\t\t\t\toTableMap.set(sTabname, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Update the Table Ranking in JSON Model as well\r\n\t\t\tvar oModelTable = this.getView().getModel(\"oModelTables\");\r\n\t\t\tvar aTables = oModelTable.getData();\r\n\t\t\tfor (i = 0; i < aTables.length; i++) {\r\n\t\t\t\taTables[i].Rank = oTableMap.get(aTables[i].Tabname);\r\n\t\t\t}\r\n\t\t\taTables.sort(function(a, b) {\r\n\t\t\t\treturn a.Rank - b.Rank;\r\n\t\t\t});\r\n\t\t\toModelTable.refresh();\r\n\r\n\t\t\t//Readjust Joins data on Tables DragnDrop\r\n\t\t\tfor (var j = 0; j < aJoins.length; j++) {\r\n\t\t\t\tvar iLTabRank = oTableMap.get(aJoins[j].LTabname);\r\n\t\t\t\tvar iRTabRank = oTableMap.get(aJoins[j].RTabname);\r\n\r\n\t\t\t\t//Swap Left to Right\r\n\t\t\t\tif (iLTabRank > iRTabRank) {\r\n\t\t\t\t\tvar temp1 = aJoins[j].LTabname;\r\n\t\t\t\t\tvar temp2 = aJoins[j].LFieldname;\r\n\t\t\t\t\taJoins[j].LTabname = aJoins[j].RTabname;\r\n\t\t\t\t\taJoins[j].LFieldname = aJoins[j].RFieldname;\r\n\t\t\t\t\taJoins[j].RTabname = temp1;\r\n\t\t\t\t\taJoins[j].RFieldname = temp2;\r\n\r\n\t\t\t\t\taJoins[j].JoinKey = [aJoins[j].LTabname, aJoins[j].LFieldname, aJoins[j].RTabname, aJoins[j].RFieldname].join(\r\n\t\t\t\t\t\t\"-\");\r\n\t\t\t\t\taJoins[j].LTabRank = parseInt(oTableMap.get(aJoins[j].LTabname), 10);\r\n\t\t\t\t\taJoins[j].RTabRank = parseInt(oTableMap.get(aJoins[j].RTabname), 10);\r\n\t\t\t\t} else { //Just Update the new Ranking\r\n\t\t\t\t\taJoins[j].LTabRank = parseInt(oTableMap.get(aJoins[j].LTabname), 10);\r\n\t\t\t\t\taJoins[j].RTabRank = parseInt(oTableMap.get(aJoins[j].RTabname), 10);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\toModelJoins.refresh(true);\r\n\r\n\t\t\t//Generate Code\r\n\t\t\tthis.generateCode();\r\n\r\n\t\t},\r\n\r\n\t\t_refreshAllJoins: function() {\r\n\r\n\t\t\tvar oView = this.getView();\r\n\r\n\t\t\tvar oMainList = oView.byId(\"idListTabBoxes\");\r\n\r\n\t\t\tvar aItems = oMainList.getItems();\r\n\r\n\t\t\tfor (var i = 0; i < aItems.length; i++) {\r\n\t\t\t\tif (aItems[i].getContent()[0] instanceof sap.m.Panel) {\r\n\t\t\t\t\tvar sTabname = aItems[i].getContent()[0].getCustomData()[1].getValue();\r\n\t\t\t\t\tvar oTableModel = oView.getModel(\"oModel\" + sTabname);\r\n\t\t\t\t\tvar aTableData = oTableModel.getData();\r\n\t\t\t\t\tfor (var j = 0; j < aTableData.length; j++) {\r\n\t\t\t\t\t\taTableData[j].JoinExists = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toTableModel.refresh(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Delete all Joins Data\r\n\t\t\tvar aJoins = oView.getModel(\"oModelJoins\").getData();\r\n\t\t\taJoins.splice(0, aJoins.length);\r\n\t\t\toView.getModel(\"oModelJoins\").refresh();\r\n\r\n\t\t},\r\n\r\n\t\tonDropField: function(oEvent) {\r\n\r\n\t\t\tvar oParams = oEvent.getParameters();\r\n\r\n\t\t\tif (oParams.droppedControl.getParent() === oParams.draggedControl.getParent()) {\r\n\t\t\t\tthis._showMessage(\"Fields of the same table cannot be linked\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//Updating Joins Model and Activating LINK Icon\r\n\t\t\tthis._addPopoverItem(oParams.draggedControl, oParams.droppedControl);\r\n\r\n\t\t\t//Generate Code\r\n\t\t\tthis.generateCode();\r\n\t\t},\r\n\r\n\t\t_addPopoverItem: function(oDragControl, oDropControl) {\r\n\r\n\t\t\tvar oDragFieldDetails = this._getContextData(oDragControl);\r\n\t\t\tvar oDropFieldDetails = this._getContextData(oDropControl);\r\n\r\n\t\t\t//To figure out which is Left and right table\r\n\t\t\tvar oJoinData = this._getJoinData(oDragControl, oDropControl, oDragFieldDetails, oDropFieldDetails);\r\n\r\n\t\t\tvar oModelJoins = this.getView().getModel(\"oModelJoins\");\r\n\t\t\tvar aJoins = oModelJoins.getData();\r\n\r\n\t\t\t//Check if Join is already there between these fields\r\n\t\t\tif (this._checkDuplicate(aJoins, oJoinData)) {\r\n\t\t\t\tthis._showMessage(\"Join Condition already exists\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//Check for Invalid Joins\r\n\t\t\tif (this._checkIllegalJoin(oDragControl, oDropControl, null)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//Join Arrays Data\r\n\t\t\taJoins.push(oJoinData);\r\n\r\n\t\t\t//Activate Link icon\r\n\t\t\toDragControl.getContent()[0].getItems()[2].setVisible(true);\r\n\t\t\toDropControl.getContent()[0].getItems()[2].setVisible(true);\r\n\r\n\t\t\t//Add BG Color for highlighting\r\n\t\t\t// oDragControl.addStyleClass(\"zep_LinkHighlight\");\r\n\t\t\t// oDropControl.addStyleClass(\"zep_LinkHighlight\");\r\n\r\n\t\t\toModelJoins.setData(aJoins);\r\n\t\t\toModelJoins.refresh(true);\r\n\r\n\t\t},\r\n\r\n\t\t_checkDuplicate: function(aJoins, oJoinData) {\r\n\r\n\t\t\tfor (var i in aJoins) {\r\n\t\t\t\tif ((aJoins[i].LTabname === oJoinData.LTabname && aJoins[i].LFieldname === oJoinData.LFieldname) &&\r\n\t\t\t\t\t(aJoins[i].RTabname === oJoinData.RTabname && aJoins[i].RFieldname === oJoinData.RFieldname)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_checkInvalidOuterJoin: function(oLinkControl) {\r\n\r\n\t\t\tvar oTabnames = this._getLRTabnames(oLinkControl);\r\n\r\n\t\t\tvar aJoins = this.getView().getModel(\"oModelJoins\").getData();\r\n\r\n\t\t\tvar sMsg = \"Illegal left-outer-join chain between tables: \";\r\n\r\n\t\t\t//Left table is already right table of other left outer join\r\n\t\t\tvar iIndex = this._searchArray(\"RTabname\", \"JoinType\", oTabnames.LTabname, 2, aJoins);\r\n\t\t\tif (iIndex > 0) { //If the value is found\r\n\t\t\t\tthis._showMessage(sMsg + aJoins.LTabname + \", \" + aJoins.RTabname + \" and \" + aJoins[iIndex].LTabname);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t//Right table is left table of other left-outer join\r\n\t\t\tiIndex = this._searchArray(\"LTabname\", \"JoinType\", oTabnames.RTabname, 2, aJoins);\r\n\t\t\tif (iIndex > 0) { //If the value is found\r\n\t\t\t\tthis._showMessage(sMsg + aJoins.LTabname + \", \" + aJoins.RTabname + \" and \" + aJoins[iIndex].RTabname);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t//A join which would be forced would lead to an error:\r\n\t\t\t//is a join with right table tabnamer defined\r\n\t\t\t//between a table with a left outer join\r\n\t\t\tfor (var i = 0; i < aJoins.length; i++) {\r\n\t\t\t\tif (aJoins[i].RTabname === oTabnames.RTabname) {\r\n\t\t\t\t\tfor (var j = 0; j < aJoins.length; j++) {\r\n\t\t\t\t\t\tif (aJoins[j].RTabname === oTabnames.LTabname && aJoins[j].JoinType === 1) {\r\n\t\t\t\t\t\t\tthis._showMessage(sMsg + aJoins.LTabname + \", \" + aJoins.RTabname + \" and \" + aJoins[iIndex].RTabname);\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//A join which would be forced would lead to an error:\r\n\t\t\t//new join is type left_outer , but r.h.s. table is\r\n\t\t\t//connected to more than one table\r\n\t\t\tfor (i = 0; i < aJoins.length; i++) {\r\n\t\t\t\tif (aJoins[i].RTabname === oTabnames.RTabname) {\r\n\t\t\t\t\tif (aJoins[i].LTabname !== oTabnames.LTabname) {\r\n\t\t\t\t\t\tthis._showMessage(oTabnames.RTabname + \" cannot be connected to two tables using left-outer join\");\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_checkIllegalJoin: function(oDragControl, oDropControl, oLinkControl) {\r\n\r\n\t\t\tvar oMainList = this.getView().byId(\"idListTabBoxes\");\r\n\r\n\t\t\tif (oLinkControl) {\r\n\t\t\t\t//If Toggling to Outer Join\r\n\t\t\t\tif (this._getJoinTypeByControl(null, null, oLinkControl) === 1) {\r\n\t\t\t\t\tif (this._checkInvalidOuterJoin(oLinkControl)) {\r\n\t\t\t\t\t\t//Again set the Join Type to Inner Join\r\n\t\t\t\t\t\toLinkControl.setState(true); //Inner Join\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (oDragControl && oDropControl) {\r\n\t\t\t\tvar iDragTableBox = oMainList.indexOfItem(oDragControl.getParent().getParent().getParent());\r\n\t\t\t\tvar iDropTableBox = oMainList.indexOfItem(oDropControl.getParent().getParent().getParent());\r\n\r\n\t\t\t\tif (iDragTableBox < iDropTableBox) {\r\n\t\t\t\t\tvar oLeftData = this._getContextData(oDragControl);\r\n\t\t\t\t\tvar oRightData = this._getContextData(oDropControl);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toLeftData = this._getContextData(oDropControl);\r\n\t\t\t\t\toRightData = this._getContextData(oDragControl);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//If fields are incompatibile for a join\r\n\t\t\t\tif ((oLeftData.DataType !== oRightData.DataType) ||\r\n\t\t\t\t\t(oLeftData.Leng !== oRightData.Leng) ||\r\n\t\t\t\t\t(oLeftData.Decimals !== oRightData.Decimals)) {\r\n\t\t\t\t\tthis._showMessage(\"Illegal Join: Fields are not compatible\");\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar aJoins = this.getView().getModel(\"oModelJoins\").getData();\r\n\r\n\t\t\t\t// is the type of the joins between the tables inconsistent?\r\n\t\t\t\t// = Are there other joins towards the right table of different type?\r\n\t\t\t\tfor (var i = 0; i < aJoins.length; i++) {\r\n\t\t\t\t\tif (aJoins[i].RTabname === oRightData.Tabname) {\r\n\t\t\t\t\t\tif (!(aJoins[i].LTabname === oLeftData.Tabname &&\r\n\t\t\t\t\t\t\t\taJoins[i].LFieldname === oLeftData.Fieldname &&\r\n\t\t\t\t\t\t\t\taJoins[i].RFieldname === oRightData.Fieldname)) {\r\n\t\t\t\t\t\t\tif (aJoins[i].JoinType !== 0) { //0 = Inner Join\r\n\t\t\t\t\t\t\t\tthis._showMessage(\"No left outer join can be defined here\");\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_getJoinData: function(oDragControl, oDropControl, oDragFieldDetails, oDropFieldDetails) {\r\n\r\n\t\t\tvar oMainList = this.getView().byId(\"idListTabBoxes\");\r\n\r\n\t\t\tvar iDragTableBox = oMainList.indexOfItem(oDragControl.getParent().getParent().getParent());\r\n\t\t\tvar iDropTableBox = oMainList.indexOfItem(oDropControl.getParent().getParent().getParent());\r\n\r\n\t\t\tif (iDragTableBox < iDropTableBox) {\r\n\t\t\t\tvar LTabRank = parseInt(iDragTableBox, 10),\r\n\t\t\t\t\tLTabname = oDragFieldDetails.Tabname,\r\n\t\t\t\t\tLFieldname = oDragFieldDetails.Fieldname,\r\n\t\t\t\t\tLFieldPos = oDragFieldDetails.Position,\r\n\t\t\t\t\tLFieldKeyflag = oDragFieldDetails.Keyflag,\r\n\t\t\t\t\tRTabRank = parseInt(iDropTableBox, 10),\r\n\t\t\t\t\tRTabname = oDropFieldDetails.Tabname,\r\n\t\t\t\t\tRFieldname = oDropFieldDetails.Fieldname,\r\n\t\t\t\t\tRFieldPos = oDropFieldDetails.Position,\r\n\t\t\t\t\tRFieldKeyflag = oDropFieldDetails.Keyflag;\r\n\t\t\t} else {\r\n\t\t\t\tLTabRank = parseInt(iDropTableBox, 10);\r\n\t\t\t\tLTabname = oDropFieldDetails.Tabname;\r\n\t\t\t\tLFieldname = oDropFieldDetails.Fieldname;\r\n\t\t\t\tLFieldPos = oDropFieldDetails.Position;\r\n\t\t\t\tLFieldKeyflag = oDropFieldDetails.Keyflag;\r\n\t\t\t\tRTabRank = parseInt(iDragTableBox, 10);\r\n\t\t\t\tRTabname = oDragFieldDetails.Tabname;\r\n\t\t\t\tRFieldname = oDragFieldDetails.Fieldname;\r\n\t\t\t\tRFieldPos = oDragFieldDetails.Position;\r\n\t\t\t\tRFieldKeyflag = oDragFieldDetails.Keyflag;\r\n\t\t\t}\r\n\r\n\t\t\tvar sJoinKey = [LTabname, LFieldname, RTabname, RFieldname].join(\"-\");\r\n\r\n\t\t\tvar oJoinData = {\r\n\t\t\t\t\"JoinKey\": sJoinKey,\r\n\t\t\t\t\"LTabRank\": LTabRank,\r\n\t\t\t\t\"LTabname\": LTabname,\r\n\t\t\t\t\"LFieldname\": LFieldname,\r\n\t\t\t\t\"LFieldPos\": LFieldPos,\r\n\t\t\t\t\"LFieldKeyflag\": LFieldKeyflag,\r\n\t\t\t\t\"RTabRank\": RTabRank,\r\n\t\t\t\t\"RTabname\": RTabname,\r\n\t\t\t\t\"RFieldname\": RFieldname,\r\n\t\t\t\t\"RFieldPos\": RFieldPos,\r\n\t\t\t\t\"RFieldKeyflag\": RFieldKeyflag,\r\n\t\t\t\t\"JoinType\": this._getJoinTypeByControl(oDragControl, oDropControl, null) //0 = Inner, 1 = Outer\r\n\t\t\t};\r\n\r\n\t\t\treturn oJoinData;\r\n\t\t},\r\n\r\n\t\t_createItem: function(oJoinData) {\r\n\r\n\t\t\tvar sLText = \"{oModelJoins>LTabname}~{oModelJoins>LFieldname}\";\r\n\t\t\tvar sRText = \"{oModelJoins>RTabname}~{oModelJoins>RFieldname}\";\r\n\r\n\t\t\tvar oCustomData = new sap.ui.core.CustomData({\r\n\t\t\t\tkey: \"JoinKey\",\r\n\t\t\t\tvalue: \"{oModelJoins>JoinKey}\"\r\n\t\t\t});\r\n\r\n\t\t\tvar oPopoverItem = new sap.m.CustomListItem({\r\n\t\t\t\tcustomData: oCustomData,\r\n\t\t\t\tcontent: [new sap.m.HBox({\r\n\t\t\t\t\titems: [\r\n\t\t\t\t\t\tnew sap.m.HBox({\r\n\t\t\t\t\t\t\titems: [\r\n\t\t\t\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\t\t\t\ttext: sLText\r\n\t\t\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginEnd\"),\r\n\t\t\t\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\t\t\t\ttext: \"=\"\r\n\t\t\t\t\t\t\t\t}).addStyleClass(\"sapUiTinyMarginEnd\"),\r\n\t\t\t\t\t\t\t\tnew sap.m.Text({\r\n\t\t\t\t\t\t\t\t\ttext: sRText\r\n\t\t\t\t\t\t\t\t}).addStyleClass(\"sapUiSmallMarginEnd\")\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}).addStyleClass(\"zep_LinkHBox\"),\r\n\t\t\t\t\t\t// new sap.m.SegmentedButton({\r\n\t\t\t\t\t\t// \tselectedKey: \"{oModelJoins>JoinType}\",\r\n\t\t\t\t\t\t// \titems: [new sap.m.SegmentedButtonItem({\r\n\t\t\t\t\t\t// \t\t\tkey: \"inner\",\r\n\t\t\t\t\t\t// \t\t\ttext: \"Inner\"\r\n\t\t\t\t\t\t// \t\t}),\r\n\t\t\t\t\t\t// \t\tnew sap.m.SegmentedButtonItem({\r\n\t\t\t\t\t\t// \t\t\tkey: \"outer\",\r\n\t\t\t\t\t\t// \t\t\ttext: \"Outer\"\r\n\t\t\t\t\t\t// \t\t})\r\n\t\t\t\t\t\t// \t]\r\n\t\t\t\t\t\t// }).addStyleClass(\"sapUiTinyMarginEnd\"),\r\n\t\t\t\t\t\tnew sap.m.Button({\r\n\t\t\t\t\t\t\ticon: \"sap-icon://delete\",\r\n\t\t\t\t\t\t\tpress: [this._onDelJoin, this]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t]\r\n\t\t\t\t})]\r\n\t\t\t});\r\n\r\n\t\t\treturn oPopoverItem;\r\n\t\t},\r\n\r\n\t\t_onFieldAliasSubmit: function(oEvent) {\r\n\r\n\t\t\tvar sAlias = oEvent.getSource().getValue();\r\n\r\n\t\t\tvar aFields = this.getView().getModel(\"oModelSelFields\").getData();\r\n\r\n\t\t\tvar sTabname = oEvent.getSource().getParent().getParent().getCustomData()[0].getValue();\r\n\t\t\tvar sFieldname = oEvent.getSource().getParent().getParent().getCustomData()[1].getValue();\r\n\r\n\t\t\tfor (var i = 0; i < aFields.length; i++) {\r\n\t\t\t\tif (aFields[i].Tabname === sTabname && aFields[i].Fieldname === sFieldname) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (aFields[i].FieldAlias === sAlias) {\r\n\t\t\t\t\tvar oFound = aFields[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (oFound) {\r\n\t\t\t\tvar sErrorText = \"Alias already used for field: \" + oFound.Tabname + \"-\" + oFound.Fieldname;\r\n\t\t\t\toEvent.getSource().setValueState(\"Error\");\r\n\t\t\t\toEvent.getSource().setValueStateText(sErrorText);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//Refresh Code\r\n\t\t\tthis.generateCode();\r\n\r\n\t\t},\r\n\r\n\t\t_onDelJoin: function(oEvent) {\r\n\r\n\t\t\tvar sJoinKey = oEvent.getSource().getParent().getParent().getCustomData()[0].getValue();\r\n\r\n\t\t\tvar oModelJoins = this.getView().getModel(\"oModelJoins\");\r\n\r\n\t\t\tvar aJoins = oModelJoins.getData();\r\n\r\n\t\t\t//Delete this Join Link from the Model/Array\r\n\t\t\tfor (var i in aJoins) {\r\n\t\t\t\tif (aJoins[i].JoinKey === sJoinKey) {\r\n\t\t\t\t\tvar oDeletedJoin = aJoins[i];\r\n\t\t\t\t\taJoins.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\toModelJoins.refresh(true);\r\n\r\n\t\t\t//Hide the Join Link Icon if No Joins are there any more\r\n\t\t\tthis._HideJoinLinks(oDeletedJoin, aJoins);\r\n\r\n\t\t\t//Generate Code\r\n\t\t\tthis.generateCode();\r\n\r\n\t\t},\r\n\r\n\t\t_searchArray: function(sKey1, sKey2, sSearch1, sSearch2, aDataSet) {\r\n\r\n\t\t\tfor (var i = 0; i < aDataSet.length; i++) {\r\n\t\t\t\tif (aDataSet[i][sKey1] === sSearch1 && aDataSet[i][sKey2] === sSearch2) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t},\r\n\r\n\t\t_getContextData: function(oControl, sModelName) {\r\n\r\n\t\t\tif (sModelName) {\r\n\t\t\t\tvar sModel = sModelName;\r\n\t\t\t} else {\r\n\t\t\t\tsModel = \"\";\r\n\r\n\t\t\t\toControl.getCustomData().forEach(function(oCustomData) {\r\n\t\t\t\t\tif (oCustomData.getKey() === \"Tabname\") {\r\n\t\t\t\t\t\tsModel = \"oModel\" + oCustomData.getValue();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t\tvar aData = this.getView().getModel(sModel).getData();\r\n\t\t\tvar iIndex = oControl.getBindingContext(sModel).getPath().substr(1);\r\n\t\t\treturn aData[iIndex];\r\n\t\t},\r\n\r\n\t\t_onPanelExpand: function(oEvent) {\r\n\r\n\t\t\tvar oPanel = oEvent.getSource();\r\n\r\n\t\t\toPanel.toggleStyleClass(\"zep_TableBox\");\r\n\r\n\t\t\toPanel.toggleStyleClass(\"zep_collapsed\");\r\n\r\n\t\t},\r\n\r\n\t\t_delSelectedFields: function(sTabname) {\r\n\r\n\t\t\tvar oModelSelFields = this.getView().getModel(\"oModelSelFields\");\r\n\r\n\t\t\tvar aData = oModelSelFields.getData();\r\n\r\n\t\t\tfor (var i = aData.length - 1; i >= 0; i--) {\r\n\t\t\t\tif (aData[i].Tabname === sTabname) {\r\n\t\t\t\t\taData.splice(i, 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ti = 0;\r\n\r\n\t\t\t//Reorder the counter\r\n\t\t\tfor (i = 0; i < aData.length; i++) {\r\n\t\t\t\taData[i].Counter = i + 1;\r\n\t\t\t}\r\n\r\n\t\t\toModelSelFields.refresh();\r\n\r\n\t\t\t//Refresh the Code\r\n\t\t\tthis.generateCode();\r\n\t\t},\r\n\r\n\t\t_onDelTable: function(oEvent) {\r\n\r\n\t\t\tvar oPanel = oEvent.getSource().getParent().getParent();\r\n\r\n\t\t\tvar sTabname = \"\";\r\n\r\n\t\t\toPanel.getCustomData().forEach(function(oCustomData) {\r\n\t\t\t\tif (oCustomData.getKey() === \"Tabname\") {\r\n\t\t\t\t\tsTabname = oCustomData.getValue();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//Delete the Joins related to that table\r\n\t\t\tvar oModelJoins = this.getView().getModel(\"oModelJoins\");\r\n\r\n\t\t\t//Delete this Join Link from the Model/Array\r\n\t\t\tvar aJoins = oModelJoins.getData();\r\n\r\n\t\t\tfor (var i = aJoins.length - 1; i >= 0; i--) {\r\n\t\t\t\tif (aJoins[i].LTabname === sTabname || aJoins[i].RTabname === sTabname) {\r\n\t\t\t\t\t//Join Link Hide\r\n\t\t\t\t\tvar oDeletedJoin = aJoins[i];\r\n\t\t\t\t\taJoins.splice(i, 1);\r\n\t\t\t\t\tthis._HideJoinLinks(oDeletedJoin, aJoins);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\toModelJoins.refresh(true);\r\n\r\n\t\t\t//Delete the Link Icon before that Table Box as well\r\n\t\t\tvar oListTabBoxes = this.getView().byId(\"idListTabBoxes\");\r\n\t\t\tvar iIndex = oListTabBoxes.indexOfItem(oPanel.getParent()); //Index of item/table being deleted\r\n\r\n\t\t\tvar aItems = oListTabBoxes.getItems();\r\n\r\n\t\t\tif (iIndex > 0) {\r\n\t\t\t\tvar oTabLinkIcon = aItems[iIndex - 1];\r\n\t\t\t\t//Destroy the table link icon before the table being deleted\r\n\t\t\t\toTabLinkIcon.destroy();\r\n\t\t\t} else if (iIndex === 0 && aItems.length > 1) {\r\n\t\t\t\toTabLinkIcon = aItems[iIndex + 1];\r\n\t\t\t\t//Destroy the table link icon before the table being deleted\r\n\t\t\t\toTabLinkIcon.destroy();\r\n\t\t\t}\r\n\r\n\t\t\t//Destroy the table item deleted\r\n\t\t\toPanel.getParent().destroy();\r\n\r\n\t\t\t//Destroy the JSON Model of the table as well\r\n\t\t\tthis.getView().getModel(\"oModel\" + sTabname).destroy();\r\n\r\n\t\t\t//Check no. of Table lefts\r\n\t\t\tvar iTables = this.getView().byId(\"idListTabBoxes\").getItems().length;\r\n\t\t\tif (iTables === 0) {\r\n\t\t\t\tthis._showEditor(false);\r\n\t\t\t\tthis.getView().byId(\"idOutputCode\").setValue(\"\");\r\n\t\t\t\tthis.getView().byId(\"idLiveCodeBtn\").setState(false);\r\n\t\t\t}\r\n\r\n\t\t\t//Delete the selected fields if any for this table\r\n\t\t\tthis._delSelectedFields(sTabname);\r\n\r\n\t\t\tvar oModelTable = this.getView().getModel(\"oModelTables\");\r\n\t\t\tvar aTables = oModelTable.getData();\r\n\t\t\tvar iDelete = this._getIndexByKey(\"Tabname\", sTabname, aTables);\r\n\t\t\taTables.splice(iDelete, 1);\r\n\t\t\toModelTable.refresh();\r\n\r\n\t\t\t//Generate Code\r\n\t\t\tthis.generateCode();\r\n\t\t},\r\n\r\n\t\t_HideJoinLinks: function(oDeletedJoin, aJoins) {\r\n\r\n\t\t\tvar iLeft = this._searchArray(\"LTabname\", \"LFieldname\", oDeletedJoin.LTabname, oDeletedJoin.LFieldname, aJoins);\r\n\t\t\tif (iLeft < 0) {\r\n\t\t\t\tiLeft = this._searchArray(\"RTabname\", \"RFieldname\", oDeletedJoin.LTabname, oDeletedJoin.LFieldname, aJoins);\r\n\t\t\t}\r\n\r\n\t\t\tvar iRight = this._searchArray(\"LTabname\", \"LFieldname\", oDeletedJoin.RTabname, oDeletedJoin.RFieldname, aJoins);\r\n\t\t\tif (iRight < 0) {\r\n\t\t\t\tiRight = this._searchArray(\"RTabname\", \"RFieldname\", oDeletedJoin.RTabname, oDeletedJoin.RFieldname, aJoins);\r\n\t\t\t}\r\n\r\n\t\t\tvar aSplit = oDeletedJoin.JoinKey.split(\"-\");\r\n\t\t\tvar oView = this.getView();\r\n\r\n\t\t\tif (iLeft < 0) {\r\n\t\t\t\tvar oLTableModel = oView.getModel(\"oModel\" + aSplit[0]);\r\n\t\t\t\tvar aLTabData = oLTableModel.getData();\r\n\t\t\t\tvar iLIndex = this._searchArray(\"Tabname\", \"Fieldname\", aSplit[0], aSplit[1], aLTabData);\r\n\t\t\t\taLTabData[iLIndex].JoinExists = false;\r\n\t\t\t\toLTableModel.refresh(true);\r\n\t\t\t}\r\n\r\n\t\t\tif (iRight < 0) {\r\n\t\t\t\tvar oRTableModel = oView.getModel(\"oModel\" + aSplit[2]);\r\n\t\t\t\tvar aRTabData = oRTableModel.getData();\r\n\t\t\t\tvar iRIndex = this._searchArray(\"Tabname\", \"Fieldname\", aSplit[2], aSplit[3], aRTabData);\r\n\t\t\t\taRTabData[iRIndex].JoinExists = false;\r\n\t\t\t\toRTableModel.refresh(true);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t_showLinks: function(oEvent) {\r\n\r\n\t\t\tvar aFilters = [];\r\n\r\n\t\t\tif (oEvent.getSource().getPressed()) {\r\n\t\t\t\tvar oFilter = new sap.ui.model.Filter({\r\n\t\t\t\t\tfilters: [\r\n\t\t\t\t\t\tnew sap.ui.model.Filter({\r\n\t\t\t\t\t\t\tpath: \"JoinExists\",\r\n\t\t\t\t\t\t\toperator: sap.ui.model.FilterOperator.EQ,\r\n\t\t\t\t\t\t\tvalue1: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t]\r\n\t\t\t\t});\r\n\r\n\t\t\t\taFilters.push(oFilter);\r\n\t\t\t}\r\n\r\n\t\t\t// update list binding\r\n\t\t\tvar oList = oEvent.getSource().getParent().getParent();\r\n\r\n\t\t\tif (!(oList instanceof sap.m.List)) {\r\n\t\t\t\toList = oEvent.getSource().getParent().getParent().getParent();\r\n\t\t\t}\r\n\r\n\t\t\tvar oBinding = oList.getBinding(\"items\");\r\n\t\t\toBinding.filter(aFilters);\r\n\r\n\t\t},\r\n\r\n\t\t_DeselectAll: function(oEvent) {\r\n\r\n\t\t\tvar oList = oEvent.getSource().getParent().getParent();\r\n\r\n\t\t\toList.getItems().forEach(function(oItem) {\r\n\t\t\t\toItem.setSelected(false);\r\n\t\t\t});\r\n\r\n\t\t\t//Delete the selected fields if any for this table\r\n\t\t\tthis._delSelectedFields(oList.getParent().getCustomData()[1].getValue());\r\n\t\t},\r\n\r\n\t\t_onFieldSearch: function(oEvent) {\r\n\r\n\t\t\tvar aFilters = [];\r\n\t\t\tvar sQuery = oEvent.getSource().getValue();\r\n\t\t\tif (sQuery && sQuery.length > 0) {\r\n\t\t\t\tvar oFilter = new sap.ui.model.Filter({\r\n\t\t\t\t\tfilters: [\r\n\t\t\t\t\t\tnew sap.ui.model.Filter({\r\n\t\t\t\t\t\t\tpath: 'Fieldname',\r\n\t\t\t\t\t\t\toperator: sap.ui.model.FilterOperator.Contains,\r\n\t\t\t\t\t\t\tvalue1: sQuery\r\n\t\t\t\t\t\t}),\r\n\r\n\t\t\t\t\t\tnew sap.ui.model.Filter({\r\n\t\t\t\t\t\t\tpath: 'Description',\r\n\t\t\t\t\t\t\toperator: sap.ui.model.FilterOperator.Contains,\r\n\t\t\t\t\t\t\tvalue1: sQuery\r\n\t\t\t\t\t\t}),\r\n\r\n\t\t\t\t\t\tnew sap.ui.model.Filter({\r\n\t\t\t\t\t\t\tpath: 'Tabname',\r\n\t\t\t\t\t\t\toperator: sap.ui.model.FilterOperator.Contains,\r\n\t\t\t\t\t\t\tvalue1: sQuery\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t],\r\n\t\t\t\t\tand: false\r\n\t\t\t\t});\r\n\r\n\t\t\t\taFilters.push(oFilter);\r\n\t\t\t}\r\n\r\n\t\t\t// update list binding\r\n\t\t\tvar oList = oEvent.getSource().getParent().getParent();\r\n\t\t\tif (!(oList instanceof sap.m.List)) {\r\n\t\t\t\toList = oEvent.getSource().getParent().getParent().getParent();\r\n\t\t\t}\r\n\t\t\tvar oBinding = oList.getBinding(\"items\");\r\n\t\t\toBinding.filter(aFilters);\r\n\t\t},\r\n\r\n\t\t_onJoinClick: function(oEvent) {\r\n\r\n\t\t\tvar oListItem = oEvent.getSource().getParent().getParent();\r\n\t\t\tvar oPopover = oListItem.getDependents()[0];\r\n\t\t\tvar oJoinList = oPopover.getContent()[0];\r\n\r\n\t\t\t//Filter out the Joins Table\r\n\t\t\tthis._applyJoinFilter(oListItem, oJoinList);\r\n\r\n\t\t\toPopover.openBy(oEvent.getSource());\r\n\r\n\t\t},\r\n\r\n\t\tonAutoJoin: function(oEvent) {\r\n\r\n\t\t\tvar aTables = this.getView().getModel(\"oModelTables\").getData();\r\n\r\n\t\t\tif (aTables.length === 0) {\r\n\t\t\t\tthis._showMessage(\"Please add tables\", false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (aTables.length < 2) {\r\n\t\t\t\tthis._showMessage(\"Please add more table(s) for auto join\", false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar oSelectItem1 = new sap.ui.core.ListItem({\r\n\t\t\t\tkey: \"{oModelTables>Tabname}\",\r\n\t\t\t\ttext: \"{oModelTables>Tabname}\"\r\n\t\t\t});\r\n\r\n\t\t\tvar oSelectItem2 = new sap.ui.core.ListItem({\r\n\t\t\t\tkey: \"{oModelTables>Tabname}\",\r\n\t\t\t\ttext: \"{oModelTables>Tabname}\"\r\n\t\t\t});\r\n\r\n\t\t\tvar aSorter = [];\r\n\r\n\t\t\taSorter.push(new sap.ui.model.Sorter({\r\n\t\t\t\tpath: \"Rank\",\r\n\t\t\t\tdescending: false\r\n\t\t\t}));\r\n\r\n\t\t\tvar oSelect1 = new sap.m.Select(\"idTable1\", {\r\n\t\t\t\tname: \"Table 1\",\r\n\t\t\t\twidth: \"140px\",\r\n\t\t\t\titems: {\r\n\t\t\t\t\tpath: \"oModelTables>/\",\r\n\t\t\t\t\ttemplate: oSelectItem1,\r\n\t\t\t\t\tsorter: aSorter,\r\n\t\t\t\t\ttemplateShareable: false\r\n\t\t\t\t}\r\n\t\t\t}).addStyleClass(\"sapUiMediumMarginBegin sapUiSizeCompact\");\r\n\r\n\t\t\tvar oSelect2 = new sap.m.Select(\"idTable2\", {\r\n\t\t\t\tname: \"Table 1\",\r\n\t\t\t\twidth: \"140px\",\r\n\t\t\t\tselectedKey: aTables[1].Tabname,\r\n\t\t\t\titems: {\r\n\t\t\t\t\tpath: \"oModelTables>/\",\r\n\t\t\t\t\ttemplate: oSelectItem2,\r\n\t\t\t\t\tsorter: aSorter,\r\n\t\t\t\t\ttemplateShareable: false\r\n\t\t\t\t}\r\n\t\t\t}).addStyleClass(\"sapUiMediumMarginBegin sapUiSizeCompact\");\r\n\r\n\t\t\tvar dialog = new Dialog({\r\n\t\t\t\ttitle: 'Choose Tables',\r\n\t\t\t\ttype: 'Message',\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tcontent: [\r\n\t\t\t\t\tnew sap.m.VBox({\r\n\t\t\t\t\t\titems: [new sap.m.HBox({\r\n\t\t\t\t\t\t\t\titems: [new sap.m.Label({\r\n\t\t\t\t\t\t\t\t\ttext: \"Table 1:\"\r\n\t\t\t\t\t\t\t\t}).addStyleClass(\"zep_LinkHBox\"), oSelect1]\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\tnew sap.m.HBox({\r\n\t\t\t\t\t\t\t\titems: [new sap.m.Label({\r\n\t\t\t\t\t\t\t\t\ttext: \"Table 2:\"\r\n\t\t\t\t\t\t\t\t}).addStyleClass(\"zep_LinkHBox\"), oSelect2]\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}).addStyleClass(\"sapUiContentPadding\")\r\n\t\t\t\t],\r\n\t\t\t\tbeginButton: new Button({\r\n\t\t\t\t\ttext: 'Submit',\r\n\t\t\t\t\tenabled: true,\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\tvar sTable1 = sap.ui.getCore().byId('idTable1').getSelectedKey();\r\n\t\t\t\t\t\tvar sTable2 = sap.ui.getCore().byId('idTable2').getSelectedKey();\r\n\r\n\t\t\t\t\t\tif (sTable1 === sTable2) {\r\n\t\t\t\t\t\t\tthis._showMessage(\"Please choose different tables\", true);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar iRank1 = this._getIndexByKey(\"Tabname\", sTable1, aTables);\r\n\t\t\t\t\t\tvar iRank2 = this._getIndexByKey(\"Tabname\", sTable2, aTables);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (iRank1 < iRank2) {\r\n\t\t\t\t\t\t\tvar sLTable = sTable1;\r\n\t\t\t\t\t\t\tvar sRTable = sTable2;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsLTable = sTable2;\r\n\t\t\t\t\t\t\tsRTable = sTable1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//Hit Backend to get join condition\r\n\t\t\t\t\t\tthis._proposeJoins(sLTable, sRTable);\r\n\r\n\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t}),\r\n\t\t\t\tendButton: new Button({\r\n\t\t\t\t\ttext: 'Cancel',\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\tdialog.close();\r\n\t\t\t\t\t}.bind(this)\r\n\t\t\t\t}),\r\n\t\t\t\tafterClose: function() {\r\n\t\t\t\t\tdialog.destroy();\r\n\t\t\t\t}\r\n\t\t\t}).addStyleClass(\"sapUiSizeCompact\");\r\n\r\n\t\t\tthis.getView().addDependent(dialog);\r\n\r\n\t\t\tdialog.open();\r\n\t\t},\r\n\r\n\t\t_applyJoinFilter: function(oListItem, oJoinList) {\r\n\r\n\t\t\tvar oListItemData = this._getContextData(oListItem);\r\n\r\n\t\t\tvar oFilter1 = new sap.ui.model.Filter({\r\n\t\t\t\tfilters: [\r\n\t\t\t\t\tnew sap.ui.model.Filter({\r\n\t\t\t\t\t\tpath: \"LTabname\",\r\n\t\t\t\t\t\toperator: sap.ui.model.FilterOperator.EQ,\r\n\t\t\t\t\t\tvalue1: oListItemData.Tabname\r\n\t\t\t\t\t}),\r\n\r\n\t\t\t\t\tnew sap.ui.model.Filter({\r\n\t\t\t\t\t\tpath: \"LFieldname\",\r\n\t\t\t\t\t\toperator: sap.ui.model.FilterOperator.EQ,\r\n\t\t\t\t\t\tvalue1: oListItemData.Fieldname\r\n\t\t\t\t\t})\r\n\t\t\t\t],\r\n\t\t\t\tand: true\r\n\t\t\t});\r\n\r\n\t\t\tvar oFilter2 = new sap.ui.model.Filter({\r\n\t\t\t\tfilters: [\r\n\t\t\t\t\tnew sap.ui.model.Filter({\r\n\t\t\t\t\t\tpath: \"RTabname\",\r\n\t\t\t\t\t\toperator: sap.ui.model.FilterOperator.EQ,\r\n\t\t\t\t\t\tvalue1: oListItemData.Tabname\r\n\t\t\t\t\t}),\r\n\r\n\t\t\t\t\tnew sap.ui.model.Filter({\r\n\t\t\t\t\t\tpath: \"RFieldname\",\r\n\t\t\t\t\t\toperator: sap.ui.model.FilterOperator.EQ,\r\n\t\t\t\t\t\tvalue1: oListItemData.Fieldname\r\n\t\t\t\t\t})\r\n\t\t\t\t],\r\n\t\t\t\tand: true\r\n\t\t\t});\r\n\r\n\t\t\tvar oFilter = new sap.ui.model.Filter({\r\n\t\t\t\tfilters: [oFilter1, oFilter2],\r\n\t\t\t\tand: false\r\n\t\t\t});\r\n\r\n\t\t\t//Apply Filters\r\n\t\t\toJoinList.getBinding(\"items\").filter(oFilter);\r\n\r\n\t\t},\r\n\r\n\t\t_showMessage: function(sMsg, bBottom) {\r\n\r\n\t\t\tif (!bBottom) {\r\n\t\t\t\tvar sPosition = \"center center\";\r\n\t\t\t} else {\r\n\t\t\t\tsPosition = \"center bottom\";\r\n\t\t\t}\r\n\r\n\t\t\tsap.m.MessageToast.show(sMsg, {\r\n\t\t\t\tduration: 1300000,\r\n\t\t\t\tmy: sPosition,\r\n\t\t\t\tat: sPosition\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tgenerateCode: function(bSkipCheck) {\r\n\r\n\t\t\tvar oView = this.getView();\r\n\r\n\t\t\tvar aTabBoxes = oView.byId(\"idListTabBoxes\").getItems(); //CustomListItems\r\n\r\n\t\t\tvar iTables = aTabBoxes.length;\r\n\r\n\t\t\tif (!bSkipCheck) {\r\n\t\t\t\tif (!oView.byId(\"idLiveCodeBtn\").getState() || iTables === 0) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Get Tables and their selected fields if any\r\n\t\t\tvar mData = this._getData();\r\n\r\n\t\t\t//Query Generator\r\n\t\t\tvar sCode = this._queryGenerator(mData);\r\n\r\n\t\t\toView.byId(\"idOutputCode\").setValue(sCode);\r\n\r\n\t\t\t// oView.byId(\"idOutputCode\").rerender();   //Working... this will trigger the animation, put class in XML view\r\n\r\n\t\t},\r\n\r\n\t\t_getData: function() {\r\n\r\n\t\t\tvar oOutput = {};\r\n\t\t\t// var mOutFields = new Map();\r\n\t\t\tvar aOutFields = [];\r\n\t\t\tvar aOutTables = [];\r\n\t\t\tvar aOutJoins = [];\r\n\r\n\t\t\tvar oView = this.getView();\r\n\r\n\t\t\tvar aTabBoxes = oView.byId(\"idListTabBoxes\").getItems(); //CustomListItems\r\n\r\n\t\t\tvar iTables = aTabBoxes.length;\r\n\r\n\t\t\tif (iTables > 1) {\r\n\t\t\t\t//Joins Data\r\n\t\t\t\tvar aJoins = this.getView().getModel(\"oModelJoins\").getData();\r\n\r\n\t\t\t\t//Clone the Array\r\n\t\t\t\taOutJoins = aJoins.slice(0); //NOT a Deep Clone, the Objects inside the first array will also be modified\r\n\r\n\t\t\t\t//Sort Left Table and then by its field positions\r\n\t\t\t\taOutJoins.sort(\r\n\t\t\t\t\tthis.firstBy(function(v1, v2) {\r\n\t\t\t\t\t\treturn v1.LTabRank - v2.LTabRank;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.thenBy(function(v1, v2) {\r\n\t\t\t\t\t\treturn v1.LFieldPos > v2.LFieldPos;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t//Looping all the added tables\r\n\t\t\tfor (var i = 0; i < aTabBoxes.length; i++) {\r\n\t\t\t\tvar oContent = aTabBoxes[i].getContent()[0]; //Panel Inside CustomListItem\r\n\r\n\t\t\t\tif (oContent instanceof sap.m.Panel) {\r\n\t\t\t\t\tvar sTabname = oContent.getCustomData()[1].getValue();\r\n\r\n\t\t\t\t\tvar sAlias = oContent.getCustomData()[2].getValue();\r\n\r\n\t\t\t\t\t//Array having tables and their alias\r\n\t\t\t\t\tvar oTab = {\r\n\t\t\t\t\t\t\"Tabname\": sTabname,\r\n\t\t\t\t\t\t\"Alias\": sAlias\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\taOutTables.push(oTab);\r\n\r\n\t\t\t\t\t//Get Selected Items of List inside the Panel\r\n\t\t\t\t\t// var aSelectedItems = oContent.getContent()[0].getSelectedItems();\r\n\r\n\t\t\t\t\t// var aFields = [];\r\n\r\n\t\t\t\t\t// //Fields Map Object\r\n\t\t\t\t\t// for (var j in aSelectedItems) {\r\n\t\t\t\t\t// \tvar sFieldname = aSelectedItems[j].getCustomData()[1].getValue();\r\n\r\n\t\t\t\t\t// \tif (iTables > 1) {\r\n\t\t\t\t\t// \t\tif (sAlias !== \"\") {\r\n\t\t\t\t\t// \t\t\tsFieldname = \"\\t\" + sAlias + \"~\" + sFieldname;\r\n\t\t\t\t\t// \t\t} else {\r\n\t\t\t\t\t// \t\t\tsFieldname = \"\\t\" + sTabname + \"~\" + sFieldname;\r\n\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t// \t} else {\r\n\t\t\t\t\t// \t\tsFieldname = \"\\t\" + sFieldname;\r\n\t\t\t\t\t// \t}\r\n\r\n\t\t\t\t\t// \taFields.push(sFieldname.toLowerCase());\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\t// var oObject = {\r\n\t\t\t\t\t// \t\"Alias\": sAlias,\r\n\t\t\t\t\t// \t\"Fields\": aFields\r\n\t\t\t\t\t// };\r\n\r\n\t\t\t\t\t// mOutFields.set(sTabname, oObject);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//Get Selected Fields\r\n\t\t\tvar aSelectedFields = oView.getModel(\"oModelSelFields\").getData();\r\n\r\n\t\t\tfor (i = 0; i < aSelectedFields.length; i++) {\r\n\t\t\t\tif (aSelectedFields[i].FieldAlias === \"\") {\r\n\t\t\t\t\tvar sFieldname = aSelectedFields[i].Fieldname.toLowerCase();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsFieldname = aSelectedFields[i].Fieldname.toLowerCase() + \" AS \" + aSelectedFields[i].FieldAlias.toLowerCase();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (iTables > 1) {\r\n\t\t\t\t\tvar sTableAlias = this._searchArraybyKey(\"Tabname\", aSelectedFields[i].Tabname, aOutTables).Alias;\r\n\r\n\t\t\t\t\tif (sTableAlias !== \"\") {\r\n\t\t\t\t\t\tsFieldname = \"\\t\" + sTableAlias.toLowerCase() + \"~\" + sFieldname;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsFieldname = \"\\t\" + aSelectedFields[i].Tabname.toLowerCase() + \"~\" + sFieldname;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsFieldname = \"\\t\" + sFieldname;\r\n\t\t\t\t}\r\n\r\n\t\t\t\taOutFields.push(sFieldname);\r\n\t\t\t}\r\n\r\n\t\t\t//Return Object\r\n\t\t\toOutput.Tables = aOutTables;\r\n\t\t\t// oOutput.Fields = mOutFields;\r\n\t\t\toOutput.Fields = aOutFields;\r\n\t\t\toOutput.Joins = aOutJoins;\r\n\r\n\t\t\treturn oOutput;\r\n\r\n\t\t},\r\n\r\n\t\t_searchArraybyKey: function(sKey, sValue, aData) {\r\n\t\t\tfor (var i = 0; i < aData.length; i++) {\r\n\t\t\t\tif (aData[i][sKey] === sValue) {\r\n\t\t\t\t\treturn aData[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_getIndexByKey: function(sKey, sValue, aData) {\r\n\t\t\tfor (var i = 0; i < aData.length; i++) {\r\n\t\t\t\tif (aData[i][sKey] === sValue) {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_getJoinTypeByControl: function(oDragControl, oDropControl, oLinkControl) {\r\n\r\n\t\t\tvar oView = this.getView();\r\n\r\n\t\t\tvar oListTabBox = oView.byId(\"idListTabBoxes\");\r\n\r\n\t\t\tvar aTabBoxes = oListTabBox.getItems();\r\n\r\n\t\t\tvar oLinkCntrl;\r\n\r\n\t\t\tif (oLinkControl) {\r\n\t\t\t\toLinkCntrl = oLinkControl;\r\n\t\t\t}\r\n\r\n\t\t\tif (oDragControl && oDropControl) {\r\n\t\t\t\t//Get the Link Control reference\r\n\t\t\t\tvar iIndex1 = oListTabBox.indexOfItem(oDragControl.getParent().getParent().getParent());\r\n\t\t\t\tvar iIndex2 = oListTabBox.indexOfItem(oDropControl.getParent().getParent().getParent());\r\n\t\t\t\tvar iIndex = (iIndex1 < iIndex2 ? iIndex1 + 1 : iIndex2 + 1);\r\n\t\t\t\toLinkCntrl = aTabBoxes[iIndex].getContent()[0].getItems()[0];\r\n\t\t\t}\r\n\r\n\t\t\tif (oLinkCntrl) {\r\n\t\t\t\tif (oLinkCntrl.getState()) {\r\n\t\t\t\t\tvar iJoinType = parseInt(0, 10); //Inner Join\r\n\t\t\t\t} else {\r\n\t\t\t\t\tiJoinType = parseInt(1, 10); //Outer Join\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn iJoinType;\r\n\t\t},\r\n\r\n\t\t_updateJoinType: function(oLinkControl) {\r\n\r\n\t\t\tvar oModelJoins = this.getView().getModel(\"oModelJoins\");\r\n\t\t\tvar aJoins = oModelJoins.getData();\r\n\t\t\tif (aJoins.length === 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar oTabnames = this._getLRTabnames(oLinkControl);\r\n\r\n\t\t\t//Get Join Type\r\n\t\t\tvar iJoinType = this._getJoinTypeByControl(null, null, oLinkControl);\r\n\r\n\t\t\t//Updating the Join Type\r\n\t\t\tfor (var i in aJoins) {\r\n\t\t\t\tif ((aJoins[i].LTabname === oTabnames.LTabname) && (aJoins[i].RTabname === oTabnames.RTabname)) {\r\n\t\t\t\t\taJoins[i].JoinType = iJoinType;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\toModelJoins.refresh(true);\r\n\t\t},\r\n\r\n\t\t_getLRTabnames: function(oLinkControl) {\r\n\r\n\t\t\tvar oListTabBox = this.getView().byId(\"idListTabBoxes\");\r\n\t\t\tvar aTabBoxes = oListTabBox.getItems();\r\n\t\t\tvar iLinkIndex = oListTabBox.indexOfItem(oLinkControl.getParent().getParent());\r\n\r\n\t\t\tvar sLTabname = aTabBoxes[iLinkIndex - 1].getContent()[0].getCustomData()[1].getValue();\r\n\t\t\tvar sRTabname = aTabBoxes[iLinkIndex + 1].getContent()[0].getCustomData()[1].getValue();\r\n\r\n\t\t\tvar oTabnames = {\r\n\t\t\t\t\"LTabname\": sLTabname,\r\n\t\t\t\t\"RTabname\": sRTabname\r\n\t\t\t};\r\n\r\n\t\t\treturn oTabnames;\r\n\t\t},\r\n\r\n\t\t_queryGenerator: function(mData) {\r\n\r\n\t\t\tvar aQuery = [\" SELECT\"];\r\n\r\n\t\t\tvar aFields = [];\r\n\t\t\tvar aJoins = [];\r\n\r\n\t\t\tvar sFields = \"\";\r\n\r\n\t\t\t// mData.Fields.forEach(function loop(value, key, map) {\r\n\t\t\t// \tif (sFields !== \"\" && value.Fields.length !== 0) {\r\n\t\t\t// \t\tsFields = sFields.concat(\",\\n\");\r\n\t\t\t// \t}\r\n\t\t\t// \tif (value.Fields.length !== 0) {\r\n\t\t\t// \t\tsFields = sFields + value.Fields.join(\",\\n\");\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\r\n\t\t\tif (mData.Fields.length !== 0) {\r\n\t\t\t\tsFields = mData.Fields.join(\",\\n\");\r\n\t\t\t}\r\n\r\n\t\t\taFields.push(sFields);\r\n\r\n\t\t\tif (sFields === \"\") {\r\n\t\t\t\taQuery.push(\"\\t*\");\r\n\t\t\t} else {\r\n\t\t\t\tArray.prototype.push.apply(aQuery, aFields);\r\n\t\t\t}\r\n\r\n\t\t\t//First Table only\r\n\t\t\tif (mData.Tables[0].Alias === \"\" || mData.Tables.length === 1) {\r\n\t\t\t\taJoins.push(\" FROM \" + mData.Tables[0].Tabname.toLowerCase());\r\n\t\t\t} else {\r\n\t\t\t\taJoins.push(\" FROM \" + mData.Tables[0].Tabname.toLowerCase() + \" AS \" + mData.Tables[0].Alias.toLowerCase());\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 1; i < mData.Tables.length; i++) {\r\n\t\t\t\tvar sTabname = mData.Tables[i].Tabname;\r\n\t\t\t\tvar sAlias = mData.Tables[i].Alias.toLowerCase();\r\n\r\n\t\t\t\tvar sJoinType = this._getJoinType(i, mData.Tables);\r\n\r\n\t\t\t\tif (sJoinType === \"\") {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (sAlias === \"\") {\r\n\t\t\t\t\taJoins.push(sJoinType + sTabname.toLowerCase());\r\n\t\t\t\t} else {\r\n\t\t\t\t\taJoins.push(sJoinType + sTabname.toLowerCase() + \" AS \" + sAlias);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar bFlag = false;\r\n\r\n\t\t\t\tvar sCondition = \"\";\r\n\r\n\t\t\t\t//Put ON Conditions\r\n\t\t\t\tfor (var j in mData.Joins) {\r\n\t\t\t\t\tif (mData.Joins[j].RTabname === sTabname) {\r\n\t\t\t\t\t\t//If more condition, putting AND in the end\r\n\t\t\t\t\t\tif (bFlag) {\r\n\t\t\t\t\t\t\tsCondition = sCondition + \" AND\\n\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sLAlias = this._searchArraybyKey(\"Tabname\", mData.Joins[j].LTabname, mData.Tables).Alias.toLowerCase();\r\n\t\t\t\t\t\tvar sRAlias = this._searchArraybyKey(\"Tabname\", mData.Joins[j].RTabname, mData.Tables).Alias.toLowerCase();\r\n\r\n\t\t\t\t\t\tvar sLTab = (sLAlias === \"\" ? mData.Joins[j].LTabname : sLAlias).toLowerCase();\r\n\t\t\t\t\t\tvar sRTab = (sRAlias === \"\" ? mData.Joins[j].RTabname : sRAlias).toLowerCase();\r\n\r\n\t\t\t\t\t\tsCondition = sCondition + \"\\tON \" + sLTab + \"~\" + mData.Joins[j].LFieldname.toLowerCase() + \" = \" + sRTab + \"~\" + mData.Joins[j]\r\n\t\t\t\t\t\t\t.RFieldname.toLowerCase();\r\n\r\n\t\t\t\t\t\tbFlag = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (sCondition !== \"\") {\r\n\t\t\t\t\taJoins.push(sCondition);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tArray.prototype.push.apply(aQuery, aJoins);\r\n\r\n\t\t\taQuery.push(\"  INTO TABLE @DATA(lt_data1).\");\r\n\r\n\t\t\treturn aQuery.join(\"\\n\");\r\n\t\t},\r\n\r\n\t\t_getJoinType: function(iIndex, aTables) {\r\n\r\n\t\t\tvar oView = this.getView();\r\n\t\t\tvar oTabList = oView.byId(\"idListTabBoxes\");\r\n\t\t\tvar oTableItem = oView.byId(aTables[iIndex].Tabname).getParent(); //Get Panel by Table Name ID and its parent is Custom list item\r\n\r\n\t\t\tvar iTableItem = oTabList.indexOfItem(oTableItem); //Index of the Table Item in loop\r\n\r\n\t\t\tvar aItems = oTabList.getItems();\r\n\r\n\t\t\tvar bState = aItems[iTableItem - 1].getContent()[0].getItems()[0].getState();\r\n\r\n\t\t\tif (bState) {\r\n\t\t\t\tvar iType = 1;\r\n\t\t\t} else {\r\n\t\t\t\tiType = 2;\r\n\t\t\t}\r\n\r\n\t\t\tvar sJoinType = \"\";\r\n\r\n\t\t\t//Join Type\r\n\t\t\tswitch (iType) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tsJoinType = \"  INNER JOIN \";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tsJoinType = \"  LEFT OUTER JOIN \";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tsJoinType = \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn sJoinType;\r\n\t\t},\r\n\r\n\t\tonFullCode: function(oEvent) {\r\n\r\n\t\t\t//Refresh the code again\r\n\t\t\tthis.generateCode(true);\r\n\r\n\t\t\tvar oOutputCode = this.getView().byId(\"idOutputCode\");\r\n\r\n\t\t\tvar sCode = oOutputCode.getValue();\r\n\r\n\t\t\tvar sQuery = \"SELECT_1\";\r\n\r\n\t\t\tvar aLines = sCode.split(\"\\n\");\r\n\r\n\t\t\tvar sCodeString = \"\";\r\n\r\n\t\t\tfor (var i = 0; i < aLines.length; i++) {\r\n\t\t\t\tif (aLines[i].length !== 0) {\r\n\t\t\t\t\taLines[i] = aLines[i].trim();\r\n\t\t\t\t\tsCodeString = sCodeString + aLines[i] + \"$NEWLINE$\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar afilters = [];\r\n\t\t\tafilters.push(new sap.ui.model.Filter(\"QueryId\", sap.ui.model.FilterOperator.EQ, sQuery));\r\n\t\t\tafilters.push(new sap.ui.model.Filter(\"CodeString\", sap.ui.model.FilterOperator.EQ, sCodeString));\r\n\r\n\t\t\tthis.getView().getModel().read(\"/CodeSet\", {\r\n\t\t\t\tfilters: afilters,\r\n\t\t\t\tsuccess: function(oData) {\r\n\t\t\t\t\tvar sDataTypes = \"*- Data Types\\n\" + oData.results[0].DataDeclaration;\r\n\r\n\t\t\t\t\tvar sOutput = sDataTypes + \"\\n\\n\" + \"*- Select Query\\n\" + sCode;\r\n\t\t\t\t\tthis._openOutputDialog(sOutput);\r\n\t\t\t\t}.bind(this),\r\n\r\n\t\t\t\terror: function(error) {\r\n\t\t\t\t\tsap.m.MessageToast.show(\"Data fetching failed\");\r\n\t\t\t\t}.bind(this)\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_openOutputDialog: function(sCode) {\r\n\r\n\t\t\tvar oDialog = new Dialog({\r\n\t\t\t\ttitle: \"Generated Code\",\r\n\t\t\t\tcontentWidth: \"550px\",\r\n\t\t\t\tcontentHeight: \"500px\",\r\n\t\t\t\tresizable: true,\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tcontent: new sap.ui.codeeditor.CodeEditor({\r\n\t\t\t\t\theight: \"500px\",\r\n\t\t\t\t\twidth: \"550px\",\r\n\t\t\t\t\tlineNumbers: false,\r\n\t\t\t\t\ttype: \"abap\",\r\n\t\t\t\t\teditable: false,\r\n\t\t\t\t\tvalueSelection: false,\r\n\t\t\t\t\tvalue: sCode\r\n\t\t\t\t}),\r\n\t\t\t\tbeginButton: new Button({\r\n\t\t\t\t\ttext: \"Close\",\r\n\t\t\t\t\tpress: function() {\r\n\t\t\t\t\t\toDialog.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\r\n\t\t\toDialog.open();\r\n\t\t}\r\n\r\n\t});\r\n\r\n});",
		"com/nvidia/vebs/Component.js": "sap.ui.define([\r\n\t\"sap/ui/core/UIComponent\",\r\n\t\"sap/ui/Device\",\r\n\t'sap/ui/model/json/JSONModel'\r\n], function(UIComponent, Device, JSONModel) {\r\n\t\"use strict\";\r\n\r\n\treturn UIComponent.extend(\"com.nvidia.vebs.Component\", {\r\n\r\n\t\tmetadata: {\r\n\t\t\tmanifest: \"json\"\r\n\t\t},\r\n\r\n\t\tinit: function() {\r\n\r\n\t\t\t// call super init (will call function \"create content\")\r\n\t\t\tsap.ui.core.UIComponent.prototype.init.apply(this, arguments);\r\n\r\n\t\t\tthis.getRouter().initialize(); \r\n\r\n\t\t\t// var oDataModel = this.getModel();\r\n\t\t\t// oDataModel.setDefaultCountMode(\"Inline\");\r\n\t\t\t\r\n\t\t\t// oDataModel.setSizeLimit(500);\r\n\t\t\t// this.setModel(oDataModel);\r\n\r\n\t\t\t// oDataModel.attachMetadataLoaded(function() {}, this);\r\n\r\n\t\t\t// oDataModel.attachBatchRequestSent(function() {\r\n\t\t\t// \tsap.ui.core.BusyIndicator.show();\r\n\t\t\t// }, this);\r\n\r\n\t\t\t// oDataModel.attachBatchRequestCompleted(function() {\r\n\t\t\t// \tsap.ui.core.BusyIndicator.hide();\r\n\t\t\t// }, this);\r\n\t\t\t\r\n\t\t}\r\n\t});\r\n\r\n});",
		"com/nvidia/vebs/view/QueryBuilder.view.xml": "<mvc:View controllerName=\"com.nvidia.vebs.controller.QueryBuilder\" height=\"100%\" xmlns:mvc=\"sap.ui.core.mvc\" xmlns:core=\"sap.ui.core\"\n\txmlns=\"sap.m\" xmlns:l=\"sap.ui.layout\" xmlns:dnd=\"sap.ui.core.dnd\" xmlns:code=\"sap.ui.codeeditor\">\n\t<Page showHeader=\"false\" title=\"Select Query Builder\">\n\t\t<subHeader>\n\t\t\t<Toolbar design=\"Solid\">\n\t\t\t\t<Button class=\"sapUiSizeCompact sapUiTinyMarginBegin\" text=\"Add Table\" icon=\"sap-icon://sys-add\" press=\"onAddTable\"/>\n\t\t\t\t<Button class=\"sapUiSizeCompact\" text=\"Propose Join Conditions\" icon=\"sap-icon://share-2\" press=\"onAutoJoin\" visible=\"true\"/>\n\t\t\t\t<ToolbarSpacer/>\n\t\t\t\t<Title text=\"Select Query Builder\" level=\"H4\"/>\n\t\t\t\t<ToolbarSpacer/>\n\t\t\t\t<Button class=\"sapUiSizeCompact\" text=\"Generate Code\" icon=\"sap-icon://source-code\" press=\"onFullCode\"/>\n\t\t\t\t<Label id=\"idLabel\" text=\"Live Code\"/>\n\t\t\t\t<Switch id=\"idLiveCodeBtn\" class=\"sapUiSizeCompact\" type=\"Default\" change=\"onSwitchToggle\" state=\"false\" ariaLabelledBy=\"idLabel\"/>\n\t\t\t</Toolbar>\n\t\t</subHeader>\n\t\t<content>\n\t\t\t<l:Splitter height=\"100%\" width=\"100%\" orientation=\"Horizontal\">\n\t\t\t\t<Panel id=\"idLeftPanel\" height=\"100%\" width=\"100%\" class=\"sapUiTinyMarginBegin\">\n\t\t\t\t\t<layoutData><l:SplitterLayoutData size=\"100%\"/></layoutData>\n\t\t\t\t\t<List id=\"idListTabBoxes\" class=\"zep_TableMainBox\" width=\"100%\" showNoData=\"false\">\n\t\t\t\t\t\t<dragDropConfig>\n\t\t\t\t\t\t\t<dnd:DragDropInfo dropEffect=\"Move\" dropLayout=\"Default\" sourceAggregation=\"items\" targetAggregation=\"items\" dropPosition=\"On\"\n\t\t\t\t\t\t\t\tdrop=\"onDropTabBox\"/>\n\t\t\t\t\t\t</dragDropConfig>\n\t\t\t\t\t</List>\n\t\t\t\t</Panel>\n\t\t\t\t<l:Splitter height=\"100%\" width=\"100%\" orientation=\"Vertical\">\n\t\t\t\t\t<Panel height=\"100%\" width=\"auto\">\n\t\t\t\t\t\t<layoutData><l:SplitterLayoutData size=\"40%\"/></layoutData>\n\t\t\t\t\t\t<code:CodeEditor id=\"idOutputCode\" height=\"800px\" width=\"350px\" lineNumbers=\"true\" type=\"abap\" editable=\"false\" valueSelection=\"false\"></code:CodeEditor>\n\t\t\t\t\t</Panel>\n\t\t\t\t\t<Panel height=\"100%\" width=\"auto\" class=\"sapUiSizeCompact\" headerText=\"Manage Output Fields\">\n\t\t\t\t\t\t<layoutData><l:SplitterLayoutData size=\"60%\"/></layoutData>\n\t\t\t\t\t\t<List id=\"idListFields\" class=\"sapUiSizeCompact\" width=\"auto\" showNoData=\"false\"\n\t\t\t\t\t\t\titems=\"{ path: 'oModelSelFields>/', sorter: [{ path: 'Counter', descending: false}]}\" backgroundDesign=\"Translucent\">\n\t\t\t\t\t\t\t<dragDropConfig>\n\t\t\t\t\t\t\t\t<dnd:DragDropInfo dropEffect=\"Move\" dropLayout=\"Default\" sourceAggregation=\"items\" targetAggregation=\"items\" dropPosition=\"Between\"\n\t\t\t\t\t\t\t\t\tdrop=\"onReorderFields\"/>\n\t\t\t\t\t\t\t</dragDropConfig>\n\t\t\t\t\t\t\t<headerToolbar>\n\t\t\t\t\t\t\t\t<Toolbar design=\"Transparent\" style=\"Clear\">\n\t\t\t\t\t\t\t\t\t<VBox width=\"100%\">\n\t\t\t\t\t\t\t\t\t\t<SearchField width=\"100%\" showSearchButton=\"true\" liveChange=\"_onFieldSearch\" placeholder=\"Table Name, Field Name\"/>\n\t\t\t\t\t\t\t\t\t</VBox>\n\t\t\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t\t\t</headerToolbar>\n\t\t\t\t\t\t\t<items>\n\t\t\t\t\t\t\t\t<CustomListItem class=\"zep_ListFields\">\n\t\t\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"Tabname\" value=\"{oModelSelFields>Tabname}\"/>\n\t\t\t\t\t\t\t\t\t\t<core:CustomData key=\"Fieldname\" value=\"{oModelSelFields>Fieldname}\"/>\n\t\t\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t\t\t<HBox width=\"100%\">\n\t\t\t\t\t\t\t\t\t\t<HBox class=\"zep_LinkHBox\">\n\t\t\t\t\t\t\t\t\t\t\t<Text class=\"sapUiTinyMarginBegin sapUiTinyMarginEnd\" width=\"17px\"\n\t\t\t\t\t\t\t\t\t\t\t\ttext=\"{path: 'oModelSelFields>Counter', type: 'sap.ui.model.type.Integer'}\"/>\n\t\t\t\t\t\t\t\t\t\t\t<Text class=\"sapUiMediumMarginEnd\" width=\"140px\" text=\"{oModelSelFields>Tabname}-{oModelSelFields>Fieldname}\"/>\n\t\t\t\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t\t\t\t\t<Input class=\"sapUiTinyMarginEnd\" placeholder=\"Field Alias\" maxLength=\"30\" width=\"120px\" value=\"{oModelSelFields>FieldAlias}\"\n\t\t\t\t\t\t\t\t\t\t\tliveChange=\"onFieldAlias\" submit=\"_onFieldAliasSubmit\"/>\n\t\t\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t\t\t</CustomListItem>\n\t\t\t\t\t\t\t</items>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Panel>\n\t\t\t\t</l:Splitter>\n\t\t\t</l:Splitter>\n\t\t</content>\n\t</Page>\n</mvc:View>",
		"com/nvidia/vebs/util/formatter.js": "jQuery.sap.declare(\"com.nvidia.vebs.util.formatter\");\r\n\r\nfunction setText(oControl, bKey) {\r\n\t\tif(bKey){\r\n\t\t\tthis.addStyleClass(\"zep_TableKey\");\r\n\t\t}\r\n}\r\n\r\ncom.nvidia.vebs.util.formatter = {\r\n\tsomeFucntion: function(bKey, sValue) {\r\n\t\tif(bKey){\r\n\t\t\tsetText();\r\n\t\t \r\n\t\t}\r\n\t}\r\n};",
		"com/nvidia/vebs/util/util.js": "Array.prototype.sort = function(keys) {\r\n\r\n\tkeys = keys || {};\r\n\r\n\t// via\r\n\t// https://stackoverflow.com/questions/5223/length-of-javascript-object-ie-associative-array\r\n\tvar obLen = function(obj) {\r\n\t\tvar size = 0,\r\n\t\t\tkey;\r\n\t\tfor (key in obj) { \r\n\t\t\tif (obj.hasOwnProperty(key))\r\n\t\t\t\tsize++;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\t// avoiding using Object.keys because I guess did it have IE8 issues?\r\n\t// else var obIx = function(obj, ix){ return Object.keys(obj)[ix]; } or\r\n\t// whatever\r\n\tvar obIx = function(obj, ix) {\r\n\t\tvar size = 0,\r\n\t\t\tkey;\r\n\t\tfor (key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key)) {\r\n\t\t\t\tif (size == ix)\r\n\t\t\t\t\treturn key;\r\n\t\t\t\tsize++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tvar keySort = function(a, b, d) {\r\n\t\td = d !== null ? d : 1;\r\n\t\t// a = a.toLowerCase(); // this breaks numbers\r\n\t\t// b = b.toLowerCase();\r\n\t\tif (a == b)\r\n\t\t\treturn 0;\r\n\t\treturn a > b ? 1 * d : -1 * d;\r\n\t};\r\n\r\n\tvar KL = obLen(keys);\r\n\r\n\tif (!KL)\r\n\t\treturn this.sort(keySort);\r\n\r\n\tfor (var k in keys) {\r\n\t\t// asc unless desc or skip\r\n\t\tkeys[k] =\r\n\t\t\tkeys[k] == 'desc' || keys[k] == -1 ? -1 : (keys[k] == 'skip' || keys[k] === 0 ? 0 : 1);\r\n\t}\r\n\r\n\tthis.sort(function(a, b) {\r\n\t\tvar sorted = 0,\r\n\t\t\tix = 0;\r\n\r\n\t\twhile (sorted === 0 && ix < KL) {\r\n\t\t\tvar k = obIx(keys, ix);\r\n\t\t\tif (k) {\r\n\t\t\t\tvar dir = keys[k];\r\n\t\t\t\tsorted = keySort(a[k], b[k], dir);\r\n\t\t\t\tix++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sorted;\r\n\t});\r\n\treturn this;\r\n};",
		"com/nvidia/vebs/view/Main.view.xml": "<core:View displayBlock=\"true\" height=\"100%\" width=\"100%\" xmlns:core=\"sap.ui.core\" xmlns=\"sap.m\">\r\n\t<App id=\"appContent\"/>  \r\n</core:View>",
		"com/nvidia/vebs/model/models.js": "sap.ui.define([\n\t\"sap/ui/model/json/JSONModel\",\n\t\"sap/ui/Device\"\n], function(JSONModel, Device) {\n\t\"use strict\";\n\n\treturn {\n\n\t\tcreateDeviceModel: function() {\n\t\t\tvar oModel = new JSONModel(Device);\n\t\t\toModel.setDefaultBindingMode(\"OneWay\");\n\t\t\treturn oModel;\n\t\t}\n\n\t};\n});"
	}
});